# Learning: Bash 3.2 Pseudo-Associative Arrays for macOS Compatibility

**ID**: L1
**Category**: architecture
**Confidence**: high

## What We Learned

Bash 3.2 (macOS default) lacks associative arrays, but dynamic variable names with `eval` can simulate them safely when values are script-controlled (not user input). The pattern `eval "status_\${name}=value"` works reliably.

## Why It Matters

Shell scripts targeting macOS must support Bash 3.2, and this pattern enables state management without external dependencies.

## Source

Session: fd8c7778-b097-4998-b1fb-ec2bfff5b66f

---

# Learning: Shell Integration Testing Requires Careful Escape Handling

**ID**: L2
**Category**: debugging
**Confidence**: high

## What We Learned

When shell scripts bind keys like Escape for different modes (voice mode cancel, picker cancel, suggestion clear), they must use a unified handler that checks state and dispatches appropriately. Multiple bindings to the same key cause conflicts where only one binding wins.

## Why It Matters

Interactive shell features with keybindings need coordination to avoid user confusion when features compete for the same keys.

## Source

Session: fd8c7778-b097-4998-b1fb-ec2bfff5b66f
