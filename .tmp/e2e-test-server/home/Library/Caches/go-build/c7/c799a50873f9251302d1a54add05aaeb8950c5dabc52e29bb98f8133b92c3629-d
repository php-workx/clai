=== RUN   TestDefaultConfig
--- PASS: TestDefaultConfig (0.00s)
=== NAME  
=== RUN   TestConfigGet
=== RUN   TestConfigGet/daemon.idle_timeout_mins
--- PASS: TestConfigGet/daemon.idle_timeout_mins (0.00s)
=== NAME  TestConfigGet
=== RUN   TestConfigGet/daemon.log_level
--- PASS: TestConfigGet/daemon.log_level (0.00s)
=== NAME  TestConfigGet
=== RUN   TestConfigGet/daemon.socket_path
--- PASS: TestConfigGet/daemon.socket_path (0.00s)
=== NAME  TestConfigGet
=== RUN   TestConfigGet/daemon.log_file
--- PASS: TestConfigGet/daemon.log_file (0.00s)
=== NAME  TestConfigGet
=== RUN   TestConfigGet/client.suggest_timeout_ms
--- PASS: TestConfigGet/client.suggest_timeout_ms (0.00s)
=== NAME  TestConfigGet
=== RUN   TestConfigGet/client.connect_timeout_ms
--- PASS: TestConfigGet/client.connect_timeout_ms (0.00s)
=== NAME  TestConfigGet
=== RUN   TestConfigGet/client.fire_and_forget
--- PASS: TestConfigGet/client.fire_and_forget (0.00s)
=== NAME  TestConfigGet
=== RUN   TestConfigGet/client.auto_start_daemon
--- PASS: TestConfigGet/client.auto_start_daemon (0.00s)
=== NAME  TestConfigGet
=== RUN   TestConfigGet/ai.enabled
--- PASS: TestConfigGet/ai.enabled (0.00s)
=== NAME  TestConfigGet
=== RUN   TestConfigGet/ai.provider
--- PASS: TestConfigGet/ai.provider (0.00s)
=== NAME  TestConfigGet
=== RUN   TestConfigGet/ai.model
--- PASS: TestConfigGet/ai.model (0.00s)
=== NAME  TestConfigGet
=== RUN   TestConfigGet/ai.auto_diagnose
--- PASS: TestConfigGet/ai.auto_diagnose (0.00s)
=== NAME  TestConfigGet
=== RUN   TestConfigGet/ai.cache_ttl_hours
--- PASS: TestConfigGet/ai.cache_ttl_hours (0.00s)
=== NAME  TestConfigGet
=== RUN   TestConfigGet/suggestions.enabled
--- PASS: TestConfigGet/suggestions.enabled (0.00s)
=== NAME  TestConfigGet
=== RUN   TestConfigGet/suggestions.max_history
--- PASS: TestConfigGet/suggestions.max_history (0.00s)
=== NAME  TestConfigGet
=== RUN   TestConfigGet/suggestions.max_ai
--- PASS: TestConfigGet/suggestions.max_ai (0.00s)
=== NAME  TestConfigGet
=== RUN   TestConfigGet/suggestions.show_risk_warning
--- PASS: TestConfigGet/suggestions.show_risk_warning (0.00s)
=== NAME  TestConfigGet
=== RUN   TestConfigGet/privacy.sanitize_ai_calls
--- PASS: TestConfigGet/privacy.sanitize_ai_calls (0.00s)
=== NAME  TestConfigGet
=== RUN   TestConfigGet/history.picker_backend
--- PASS: TestConfigGet/history.picker_backend (0.00s)
=== NAME  TestConfigGet
=== RUN   TestConfigGet/history.picker_open_on_empty
--- PASS: TestConfigGet/history.picker_open_on_empty (0.00s)
=== NAME  TestConfigGet
=== RUN   TestConfigGet/history.picker_page_size
--- PASS: TestConfigGet/history.picker_page_size (0.00s)
=== NAME  TestConfigGet
=== RUN   TestConfigGet/history.picker_case_sensitive
--- PASS: TestConfigGet/history.picker_case_sensitive (0.00s)
=== NAME  TestConfigGet
=== RUN   TestConfigGet/history.up_arrow_trigger
--- PASS: TestConfigGet/history.up_arrow_trigger (0.00s)
=== NAME  TestConfigGet
=== RUN   TestConfigGet/history.up_arrow_double_window_ms
--- PASS: TestConfigGet/history.up_arrow_double_window_ms (0.00s)
=== NAME  TestConfigGet
--- PASS: TestConfigGet (0.00s)
=== NAME  
=== RUN   TestConfigSet
=== RUN   TestConfigSet/daemon.idle_timeout_mins=30
--- PASS: TestConfigSet/daemon.idle_timeout_mins=30 (0.00s)
=== NAME  TestConfigSet
=== RUN   TestConfigSet/daemon.idle_timeout_mins=0
--- PASS: TestConfigSet/daemon.idle_timeout_mins=0 (0.00s)
=== NAME  TestConfigSet
=== RUN   TestConfigSet/daemon.socket_path=/custom/path.sock
--- PASS: TestConfigSet/daemon.socket_path=/custom/path.sock (0.00s)
=== NAME  TestConfigSet
=== RUN   TestConfigSet/daemon.log_level=debug
--- PASS: TestConfigSet/daemon.log_level=debug (0.00s)
=== NAME  TestConfigSet
=== RUN   TestConfigSet/daemon.log_level=warn
--- PASS: TestConfigSet/daemon.log_level=warn (0.00s)
=== NAME  TestConfigSet
=== RUN   TestConfigSet/daemon.log_level=error
--- PASS: TestConfigSet/daemon.log_level=error (0.00s)
=== NAME  TestConfigSet
=== RUN   TestConfigSet/daemon.log_file=/tmp/test.log
--- PASS: TestConfigSet/daemon.log_file=/tmp/test.log (0.00s)
=== NAME  TestConfigSet
=== RUN   TestConfigSet/client.suggest_timeout_ms=100
--- PASS: TestConfigSet/client.suggest_timeout_ms=100 (0.00s)
=== NAME  TestConfigSet
=== RUN   TestConfigSet/client.connect_timeout_ms=50
--- PASS: TestConfigSet/client.connect_timeout_ms=50 (0.00s)
=== NAME  TestConfigSet
=== RUN   TestConfigSet/client.fire_and_forget=false
--- PASS: TestConfigSet/client.fire_and_forget=false (0.00s)
=== NAME  TestConfigSet
=== RUN   TestConfigSet/client.fire_and_forget=true
--- PASS: TestConfigSet/client.fire_and_forget=true (0.00s)
=== NAME  TestConfigSet
=== RUN   TestConfigSet/client.auto_start_daemon=false
--- PASS: TestConfigSet/client.auto_start_daemon=false (0.00s)
=== NAME  TestConfigSet
=== RUN   TestConfigSet/ai.enabled=true
--- PASS: TestConfigSet/ai.enabled=true (0.00s)
=== NAME  TestConfigSet
=== RUN   TestConfigSet/ai.enabled=false
--- PASS: TestConfigSet/ai.enabled=false (0.00s)
=== NAME  TestConfigSet
=== RUN   TestConfigSet/ai.provider=anthropic
--- PASS: TestConfigSet/ai.provider=anthropic (0.00s)
=== NAME  TestConfigSet
=== RUN   TestConfigSet/ai.provider=auto
--- PASS: TestConfigSet/ai.provider=auto (0.00s)
=== NAME  TestConfigSet
=== RUN   TestConfigSet/ai.model=gpt-4
--- PASS: TestConfigSet/ai.model=gpt-4 (0.00s)
=== NAME  TestConfigSet
=== RUN   TestConfigSet/ai.model=
--- PASS: TestConfigSet/ai.model= (0.00s)
=== NAME  TestConfigSet
=== RUN   TestConfigSet/ai.auto_diagnose=true
--- PASS: TestConfigSet/ai.auto_diagnose=true (0.00s)
=== NAME  TestConfigSet
=== RUN   TestConfigSet/ai.cache_ttl_hours=72
--- PASS: TestConfigSet/ai.cache_ttl_hours=72 (0.00s)
=== NAME  TestConfigSet
=== RUN   TestConfigSet/ai.cache_ttl_hours=0
--- PASS: TestConfigSet/ai.cache_ttl_hours=0 (0.00s)
=== NAME  TestConfigSet
=== RUN   TestConfigSet/suggestions.enabled=false
--- PASS: TestConfigSet/suggestions.enabled=false (0.00s)
=== NAME  TestConfigSet
=== RUN   TestConfigSet/suggestions.max_history=10
--- PASS: TestConfigSet/suggestions.max_history=10 (0.00s)
=== NAME  TestConfigSet
=== RUN   TestConfigSet/suggestions.max_history=0
--- PASS: TestConfigSet/suggestions.max_history=0 (0.00s)
=== NAME  TestConfigSet
=== RUN   TestConfigSet/suggestions.max_ai=10
--- PASS: TestConfigSet/suggestions.max_ai=10 (0.00s)
=== NAME  TestConfigSet
=== RUN   TestConfigSet/suggestions.show_risk_warning=false
--- PASS: TestConfigSet/suggestions.show_risk_warning=false (0.00s)
=== NAME  TestConfigSet
=== RUN   TestConfigSet/privacy.sanitize_ai_calls=false
--- PASS: TestConfigSet/privacy.sanitize_ai_calls=false (0.00s)
=== NAME  TestConfigSet
=== RUN   TestConfigSet/privacy.sanitize_ai_calls=true
--- PASS: TestConfigSet/privacy.sanitize_ai_calls=true (0.00s)
=== NAME  TestConfigSet
=== RUN   TestConfigSet/history.picker_backend=fzf
--- PASS: TestConfigSet/history.picker_backend=fzf (0.00s)
=== NAME  TestConfigSet
=== RUN   TestConfigSet/history.picker_backend=clai
--- PASS: TestConfigSet/history.picker_backend=clai (0.00s)
=== NAME  TestConfigSet
=== RUN   TestConfigSet/history.picker_backend=builtin
--- PASS: TestConfigSet/history.picker_backend=builtin (0.00s)
=== NAME  TestConfigSet
=== RUN   TestConfigSet/history.picker_open_on_empty=true
--- PASS: TestConfigSet/history.picker_open_on_empty=true (0.00s)
=== NAME  TestConfigSet
=== RUN   TestConfigSet/history.picker_page_size=50
--- PASS: TestConfigSet/history.picker_page_size=50 (0.00s)
=== NAME  TestConfigSet
=== RUN   TestConfigSet/history.picker_case_sensitive=true
--- PASS: TestConfigSet/history.picker_case_sensitive=true (0.00s)
=== NAME  TestConfigSet
=== RUN   TestConfigSet/history.up_arrow_trigger=double
--- PASS: TestConfigSet/history.up_arrow_trigger=double (0.00s)
=== NAME  TestConfigSet
=== RUN   TestConfigSet/history.up_arrow_double_window_ms=300
--- PASS: TestConfigSet/history.up_arrow_double_window_ms=300 (0.00s)
=== NAME  TestConfigSet
--- PASS: TestConfigSet (0.00s)
=== NAME  
=== RUN   TestConfigGetWithCustomValues
=== RUN   TestConfigGetWithCustomValues/daemon.idle_timeout_mins
--- PASS: TestConfigGetWithCustomValues/daemon.idle_timeout_mins (0.00s)
=== NAME  TestConfigGetWithCustomValues
=== RUN   TestConfigGetWithCustomValues/daemon.socket_path
--- PASS: TestConfigGetWithCustomValues/daemon.socket_path (0.00s)
=== NAME  TestConfigGetWithCustomValues
=== RUN   TestConfigGetWithCustomValues/daemon.log_level
--- PASS: TestConfigGetWithCustomValues/daemon.log_level (0.00s)
=== NAME  TestConfigGetWithCustomValues
=== RUN   TestConfigGetWithCustomValues/daemon.log_file
--- PASS: TestConfigGetWithCustomValues/daemon.log_file (0.00s)
=== NAME  TestConfigGetWithCustomValues
=== RUN   TestConfigGetWithCustomValues/client.suggest_timeout_ms
--- PASS: TestConfigGetWithCustomValues/client.suggest_timeout_ms (0.00s)
=== NAME  TestConfigGetWithCustomValues
=== RUN   TestConfigGetWithCustomValues/client.connect_timeout_ms
--- PASS: TestConfigGetWithCustomValues/client.connect_timeout_ms (0.00s)
=== NAME  TestConfigGetWithCustomValues
=== RUN   TestConfigGetWithCustomValues/client.fire_and_forget
--- PASS: TestConfigGetWithCustomValues/client.fire_and_forget (0.00s)
=== NAME  TestConfigGetWithCustomValues
=== RUN   TestConfigGetWithCustomValues/client.auto_start_daemon
--- PASS: TestConfigGetWithCustomValues/client.auto_start_daemon (0.00s)
=== NAME  TestConfigGetWithCustomValues
=== RUN   TestConfigGetWithCustomValues/ai.enabled
--- PASS: TestConfigGetWithCustomValues/ai.enabled (0.00s)
=== NAME  TestConfigGetWithCustomValues
=== RUN   TestConfigGetWithCustomValues/ai.provider
--- PASS: TestConfigGetWithCustomValues/ai.provider (0.00s)
=== NAME  TestConfigGetWithCustomValues
=== RUN   TestConfigGetWithCustomValues/ai.model
--- PASS: TestConfigGetWithCustomValues/ai.model (0.00s)
=== NAME  TestConfigGetWithCustomValues
=== RUN   TestConfigGetWithCustomValues/ai.auto_diagnose
--- PASS: TestConfigGetWithCustomValues/ai.auto_diagnose (0.00s)
=== NAME  TestConfigGetWithCustomValues
=== RUN   TestConfigGetWithCustomValues/ai.cache_ttl_hours
--- PASS: TestConfigGetWithCustomValues/ai.cache_ttl_hours (0.00s)
=== NAME  TestConfigGetWithCustomValues
=== RUN   TestConfigGetWithCustomValues/suggestions.max_history
--- PASS: TestConfigGetWithCustomValues/suggestions.max_history (0.00s)
=== NAME  TestConfigGetWithCustomValues
=== RUN   TestConfigGetWithCustomValues/suggestions.max_ai
--- PASS: TestConfigGetWithCustomValues/suggestions.max_ai (0.00s)
=== NAME  TestConfigGetWithCustomValues
=== RUN   TestConfigGetWithCustomValues/suggestions.show_risk_warning
--- PASS: TestConfigGetWithCustomValues/suggestions.show_risk_warning (0.00s)
=== NAME  TestConfigGetWithCustomValues
=== RUN   TestConfigGetWithCustomValues/privacy.sanitize_ai_calls
--- PASS: TestConfigGetWithCustomValues/privacy.sanitize_ai_calls (0.00s)
=== NAME  TestConfigGetWithCustomValues
=== RUN   TestConfigGetWithCustomValues/history.up_arrow_trigger
--- PASS: TestConfigGetWithCustomValues/history.up_arrow_trigger (0.00s)
=== NAME  TestConfigGetWithCustomValues
=== RUN   TestConfigGetWithCustomValues/history.up_arrow_double_window_ms
--- PASS: TestConfigGetWithCustomValues/history.up_arrow_double_window_ms (0.00s)
=== NAME  TestConfigGetWithCustomValues
--- PASS: TestConfigGetWithCustomValues (0.00s)
=== NAME  
=== RUN   TestConfigGetInvalidKey
=== RUN   TestConfigGetInvalidKey/invalid
--- PASS: TestConfigGetInvalidKey/invalid (0.00s)
=== NAME  TestConfigGetInvalidKey
=== RUN   TestConfigGetInvalidKey/invalid.key
--- PASS: TestConfigGetInvalidKey/invalid.key (0.00s)
=== NAME  TestConfigGetInvalidKey
=== RUN   TestConfigGetInvalidKey/#00
--- PASS: TestConfigGetInvalidKey/#00 (0.00s)
=== NAME  TestConfigGetInvalidKey
=== RUN   TestConfigGetInvalidKey/.
--- PASS: TestConfigGetInvalidKey/. (0.00s)
=== NAME  TestConfigGetInvalidKey
=== RUN   TestConfigGetInvalidKey/.idle_timeout_mins
--- PASS: TestConfigGetInvalidKey/.idle_timeout_mins (0.00s)
=== NAME  TestConfigGetInvalidKey
=== RUN   TestConfigGetInvalidKey/daemon.
--- PASS: TestConfigGetInvalidKey/daemon. (0.00s)
=== NAME  TestConfigGetInvalidKey
=== RUN   TestConfigGetInvalidKey/daemon.idle.timeout
--- PASS: TestConfigGetInvalidKey/daemon.idle.timeout (0.00s)
=== NAME  TestConfigGetInvalidKey
=== RUN   TestConfigGetInvalidKey/daemon.idle.timeout_mins
--- PASS: TestConfigGetInvalidKey/daemon.idle.timeout_mins (0.00s)
=== NAME  TestConfigGetInvalidKey
=== RUN   TestConfigGetInvalidKey/daemon_.idle_timeout_mins
--- PASS: TestConfigGetInvalidKey/daemon_.idle_timeout_mins (0.00s)
=== NAME  TestConfigGetInvalidKey
=== RUN   TestConfigGetInvalidKey/daemonidletimeoutmins
--- PASS: TestConfigGetInvalidKey/daemonidletimeoutmins (0.00s)
=== NAME  TestConfigGetInvalidKey
=== RUN   TestConfigGetInvalidKey/unknown.field
--- PASS: TestConfigGetInvalidKey/unknown.field (0.00s)
=== NAME  TestConfigGetInvalidKey
=== RUN   TestConfigGetInvalidKey/deamon.idle_timeout_mins
--- PASS: TestConfigGetInvalidKey/deamon.idle_timeout_mins (0.00s)
=== NAME  TestConfigGetInvalidKey
=== RUN   TestConfigGetInvalidKey/Daemon.idle_timeout_mins
--- PASS: TestConfigGetInvalidKey/Daemon.idle_timeout_mins (0.00s)
=== NAME  TestConfigGetInvalidKey
=== RUN   TestConfigGetInvalidKey/daemon.unknown_field
--- PASS: TestConfigGetInvalidKey/daemon.unknown_field (0.00s)
=== NAME  TestConfigGetInvalidKey
=== RUN   TestConfigGetInvalidKey/daemon.idle_timeout
--- PASS: TestConfigGetInvalidKey/daemon.idle_timeout (0.00s)
=== NAME  TestConfigGetInvalidKey
=== RUN   TestConfigGetInvalidKey/client.unknown_field
--- PASS: TestConfigGetInvalidKey/client.unknown_field (0.00s)
=== NAME  TestConfigGetInvalidKey
=== RUN   TestConfigGetInvalidKey/ai.unknown_field
--- PASS: TestConfigGetInvalidKey/ai.unknown_field (0.00s)
=== NAME  TestConfigGetInvalidKey
=== RUN   TestConfigGetInvalidKey/ai.enable
--- PASS: TestConfigGetInvalidKey/ai.enable (0.00s)
=== NAME  TestConfigGetInvalidKey
=== RUN   TestConfigGetInvalidKey/suggestions.unknown_field
--- PASS: TestConfigGetInvalidKey/suggestions.unknown_field (0.00s)
=== NAME  TestConfigGetInvalidKey
=== RUN   TestConfigGetInvalidKey/privacy.unknown_field
--- PASS: TestConfigGetInvalidKey/privacy.unknown_field (0.00s)
=== NAME  TestConfigGetInvalidKey
=== RUN   TestConfigGetInvalidKey/history.unknown_field
--- PASS: TestConfigGetInvalidKey/history.unknown_field (0.00s)
=== NAME  TestConfigGetInvalidKey
--- PASS: TestConfigGetInvalidKey (0.00s)
=== NAME  
=== RUN   TestConfigSetInvalidKey
=== RUN   TestConfigSetInvalidKey/daemonidletimeoutmins
--- PASS: TestConfigSetInvalidKey/daemonidletimeoutmins (0.00s)
=== NAME  TestConfigSetInvalidKey
=== RUN   TestConfigSetInvalidKey/#00
--- PASS: TestConfigSetInvalidKey/#00 (0.00s)
=== NAME  TestConfigSetInvalidKey
=== RUN   TestConfigSetInvalidKey/daemon
--- PASS: TestConfigSetInvalidKey/daemon (0.00s)
=== NAME  TestConfigSetInvalidKey
=== RUN   TestConfigSetInvalidKey/.
--- PASS: TestConfigSetInvalidKey/. (0.00s)
=== NAME  TestConfigSetInvalidKey
=== RUN   TestConfigSetInvalidKey/.idle_timeout_mins
--- PASS: TestConfigSetInvalidKey/.idle_timeout_mins (0.00s)
=== NAME  TestConfigSetInvalidKey
=== RUN   TestConfigSetInvalidKey/daemon.
--- PASS: TestConfigSetInvalidKey/daemon. (0.00s)
=== NAME  TestConfigSetInvalidKey
=== RUN   TestConfigSetInvalidKey/daemon.idle.timeout
--- PASS: TestConfigSetInvalidKey/daemon.idle.timeout (0.00s)
=== NAME  TestConfigSetInvalidKey
=== RUN   TestConfigSetInvalidKey/daemon.idle.timeout_mins
--- PASS: TestConfigSetInvalidKey/daemon.idle.timeout_mins (0.00s)
=== NAME  TestConfigSetInvalidKey
=== RUN   TestConfigSetInvalidKey/unknown.field
--- PASS: TestConfigSetInvalidKey/unknown.field (0.00s)
=== NAME  TestConfigSetInvalidKey
=== RUN   TestConfigSetInvalidKey/deamon.idle_timeout_mins
--- PASS: TestConfigSetInvalidKey/deamon.idle_timeout_mins (0.00s)
=== NAME  TestConfigSetInvalidKey
=== RUN   TestConfigSetInvalidKey/Daemon.idle_timeout_mins
--- PASS: TestConfigSetInvalidKey/Daemon.idle_timeout_mins (0.00s)
=== NAME  TestConfigSetInvalidKey
=== RUN   TestConfigSetInvalidKey/daemon.unknown_field
--- PASS: TestConfigSetInvalidKey/daemon.unknown_field (0.00s)
=== NAME  TestConfigSetInvalidKey
=== RUN   TestConfigSetInvalidKey/client.unknown_field
--- PASS: TestConfigSetInvalidKey/client.unknown_field (0.00s)
=== NAME  TestConfigSetInvalidKey
=== RUN   TestConfigSetInvalidKey/ai.unknown_field
--- PASS: TestConfigSetInvalidKey/ai.unknown_field (0.00s)
=== NAME  TestConfigSetInvalidKey
=== RUN   TestConfigSetInvalidKey/suggestions.unknown_field
--- PASS: TestConfigSetInvalidKey/suggestions.unknown_field (0.00s)
=== NAME  TestConfigSetInvalidKey
=== RUN   TestConfigSetInvalidKey/privacy.unknown_field
--- PASS: TestConfigSetInvalidKey/privacy.unknown_field (0.00s)
=== NAME  TestConfigSetInvalidKey
=== RUN   TestConfigSetInvalidKey/history.unknown_field
--- PASS: TestConfigSetInvalidKey/history.unknown_field (0.00s)
=== NAME  TestConfigSetInvalidKey
--- PASS: TestConfigSetInvalidKey (0.00s)
=== NAME  
=== RUN   TestConfigSetInvalidValue
=== RUN   TestConfigSetInvalidValue/daemon.idle_timeout_mins=not_a_number
--- PASS: TestConfigSetInvalidValue/daemon.idle_timeout_mins=not_a_number (0.00s)
=== NAME  TestConfigSetInvalidValue
=== RUN   TestConfigSetInvalidValue/daemon.idle_timeout_mins=12.5
--- PASS: TestConfigSetInvalidValue/daemon.idle_timeout_mins=12.5 (0.00s)
=== NAME  TestConfigSetInvalidValue
=== RUN   TestConfigSetInvalidValue/daemon.idle_timeout_mins=
--- PASS: TestConfigSetInvalidValue/daemon.idle_timeout_mins= (0.00s)
=== NAME  TestConfigSetInvalidValue
=== RUN   TestConfigSetInvalidValue/daemon.idle_timeout_mins=abc123
--- PASS: TestConfigSetInvalidValue/daemon.idle_timeout_mins=abc123 (0.00s)
=== NAME  TestConfigSetInvalidValue
=== RUN   TestConfigSetInvalidValue/client.suggest_timeout_ms=invalid
--- PASS: TestConfigSetInvalidValue/client.suggest_timeout_ms=invalid (0.00s)
=== NAME  TestConfigSetInvalidValue
=== RUN   TestConfigSetInvalidValue/client.connect_timeout_ms=3.14
--- PASS: TestConfigSetInvalidValue/client.connect_timeout_ms=3.14 (0.00s)
=== NAME  TestConfigSetInvalidValue
=== RUN   TestConfigSetInvalidValue/ai.cache_ttl_hours=twenty
--- PASS: TestConfigSetInvalidValue/ai.cache_ttl_hours=twenty (0.00s)
=== NAME  TestConfigSetInvalidValue
=== RUN   TestConfigSetInvalidValue/suggestions.max_history=five
--- PASS: TestConfigSetInvalidValue/suggestions.max_history=five (0.00s)
=== NAME  TestConfigSetInvalidValue
=== RUN   TestConfigSetInvalidValue/suggestions.max_ai=1.5
--- PASS: TestConfigSetInvalidValue/suggestions.max_ai=1.5 (0.00s)
=== NAME  TestConfigSetInvalidValue
=== RUN   TestConfigSetInvalidValue/history.picker_page_size=not_a_number
--- PASS: TestConfigSetInvalidValue/history.picker_page_size=not_a_number (0.00s)
=== NAME  TestConfigSetInvalidValue
=== RUN   TestConfigSetInvalidValue/client.fire_and_forget=yes
--- PASS: TestConfigSetInvalidValue/client.fire_and_forget=yes (0.00s)
=== NAME  TestConfigSetInvalidValue
=== RUN   TestConfigSetInvalidValue/client.fire_and_forget=no
--- PASS: TestConfigSetInvalidValue/client.fire_and_forget=no (0.00s)
=== NAME  TestConfigSetInvalidValue
=== RUN   TestConfigSetInvalidValue/client.fire_and_forget=
--- PASS: TestConfigSetInvalidValue/client.fire_and_forget= (0.00s)
=== NAME  TestConfigSetInvalidValue
=== RUN   TestConfigSetInvalidValue/client.auto_start_daemon=YES
--- PASS: TestConfigSetInvalidValue/client.auto_start_daemon=YES (0.00s)
=== NAME  TestConfigSetInvalidValue
=== RUN   TestConfigSetInvalidValue/ai.enabled=enable
--- PASS: TestConfigSetInvalidValue/ai.enabled=enable (0.00s)
=== NAME  TestConfigSetInvalidValue
=== RUN   TestConfigSetInvalidValue/ai.auto_diagnose=on
--- PASS: TestConfigSetInvalidValue/ai.auto_diagnose=on (0.00s)
=== NAME  TestConfigSetInvalidValue
=== RUN   TestConfigSetInvalidValue/suggestions.show_risk_warning=off
--- PASS: TestConfigSetInvalidValue/suggestions.show_risk_warning=off (0.00s)
=== NAME  TestConfigSetInvalidValue
=== RUN   TestConfigSetInvalidValue/privacy.sanitize_ai_calls=maybe
--- PASS: TestConfigSetInvalidValue/privacy.sanitize_ai_calls=maybe (0.00s)
=== NAME  TestConfigSetInvalidValue
=== RUN   TestConfigSetInvalidValue/history.picker_open_on_empty=yes
--- PASS: TestConfigSetInvalidValue/history.picker_open_on_empty=yes (0.00s)
=== NAME  TestConfigSetInvalidValue
=== RUN   TestConfigSetInvalidValue/history.picker_case_sensitive=maybe
--- PASS: TestConfigSetInvalidValue/history.picker_case_sensitive=maybe (0.00s)
=== NAME  TestConfigSetInvalidValue
=== RUN   TestConfigSetInvalidValue/history.up_arrow_double_window_ms=not_a_number
--- PASS: TestConfigSetInvalidValue/history.up_arrow_double_window_ms=not_a_number (0.00s)
=== NAME  TestConfigSetInvalidValue
=== RUN   TestConfigSetInvalidValue/daemon.log_level=trace
--- PASS: TestConfigSetInvalidValue/daemon.log_level=trace (0.00s)
=== NAME  TestConfigSetInvalidValue
=== RUN   TestConfigSetInvalidValue/daemon.log_level=DEBUG
--- PASS: TestConfigSetInvalidValue/daemon.log_level=DEBUG (0.00s)
=== NAME  TestConfigSetInvalidValue
=== RUN   TestConfigSetInvalidValue/daemon.log_level=Info
--- PASS: TestConfigSetInvalidValue/daemon.log_level=Info (0.00s)
=== NAME  TestConfigSetInvalidValue
=== RUN   TestConfigSetInvalidValue/daemon.log_level=WARNING
--- PASS: TestConfigSetInvalidValue/daemon.log_level=WARNING (0.00s)
=== NAME  TestConfigSetInvalidValue
=== RUN   TestConfigSetInvalidValue/daemon.log_level=fatal
--- PASS: TestConfigSetInvalidValue/daemon.log_level=fatal (0.00s)
=== NAME  TestConfigSetInvalidValue
=== RUN   TestConfigSetInvalidValue/daemon.log_level=
--- PASS: TestConfigSetInvalidValue/daemon.log_level= (0.00s)
=== NAME  TestConfigSetInvalidValue
=== RUN   TestConfigSetInvalidValue/ai.provider=claude
--- PASS: TestConfigSetInvalidValue/ai.provider=claude (0.00s)
=== NAME  TestConfigSetInvalidValue
=== RUN   TestConfigSetInvalidValue/ai.provider=gpt4
--- PASS: TestConfigSetInvalidValue/ai.provider=gpt4 (0.00s)
=== NAME  TestConfigSetInvalidValue
=== RUN   TestConfigSetInvalidValue/ai.provider=gemini
--- PASS: TestConfigSetInvalidValue/ai.provider=gemini (0.00s)
=== NAME  TestConfigSetInvalidValue
=== RUN   TestConfigSetInvalidValue/ai.provider=ANTHROPIC
--- PASS: TestConfigSetInvalidValue/ai.provider=ANTHROPIC (0.00s)
=== NAME  TestConfigSetInvalidValue
=== RUN   TestConfigSetInvalidValue/ai.provider=
--- PASS: TestConfigSetInvalidValue/ai.provider= (0.00s)
=== NAME  TestConfigSetInvalidValue
=== RUN   TestConfigSetInvalidValue/history.picker_backend=invalid
--- PASS: TestConfigSetInvalidValue/history.picker_backend=invalid (0.00s)
=== NAME  TestConfigSetInvalidValue
=== RUN   TestConfigSetInvalidValue/history.picker_backend=
--- PASS: TestConfigSetInvalidValue/history.picker_backend= (0.00s)
=== NAME  TestConfigSetInvalidValue
=== RUN   TestConfigSetInvalidValue/history.up_arrow_trigger=off
--- PASS: TestConfigSetInvalidValue/history.up_arrow_trigger=off (0.00s)
=== NAME  TestConfigSetInvalidValue
=== RUN   TestConfigSetInvalidValue/history.up_arrow_trigger=DOUBLE
--- PASS: TestConfigSetInvalidValue/history.up_arrow_trigger=DOUBLE (0.00s)
=== NAME  TestConfigSetInvalidValue
=== RUN   TestConfigSetInvalidValue/history.up_arrow_trigger=
--- PASS: TestConfigSetInvalidValue/history.up_arrow_trigger= (0.00s)
=== NAME  TestConfigSetInvalidValue
--- PASS: TestConfigSetInvalidValue (0.00s)
=== NAME  
=== RUN   TestConfigValidate
=== RUN   TestConfigValidate/default_is_valid
--- PASS: TestConfigValidate/default_is_valid (0.00s)
=== NAME  TestConfigValidate
=== RUN   TestConfigValidate/negative_idle_timeout
--- PASS: TestConfigValidate/negative_idle_timeout (0.00s)
=== NAME  TestConfigValidate
=== RUN   TestConfigValidate/invalid_log_level_empty
--- PASS: TestConfigValidate/invalid_log_level_empty (0.00s)
=== NAME  TestConfigValidate
=== RUN   TestConfigValidate/invalid_log_level_unknown
--- PASS: TestConfigValidate/invalid_log_level_unknown (0.00s)
=== NAME  TestConfigValidate
=== RUN   TestConfigValidate/negative_suggest_timeout
--- PASS: TestConfigValidate/negative_suggest_timeout (0.00s)
=== NAME  TestConfigValidate
=== RUN   TestConfigValidate/negative_connect_timeout
--- PASS: TestConfigValidate/negative_connect_timeout (0.00s)
=== NAME  TestConfigValidate
=== RUN   TestConfigValidate/invalid_provider_empty
--- PASS: TestConfigValidate/invalid_provider_empty (0.00s)
=== NAME  TestConfigValidate
=== RUN   TestConfigValidate/invalid_provider_unknown
--- PASS: TestConfigValidate/invalid_provider_unknown (0.00s)
=== NAME  TestConfigValidate
=== RUN   TestConfigValidate/negative_cache_ttl
--- PASS: TestConfigValidate/negative_cache_ttl (0.00s)
=== NAME  TestConfigValidate
=== RUN   TestConfigValidate/negative_max_history
--- PASS: TestConfigValidate/negative_max_history (0.00s)
=== NAME  TestConfigValidate
=== RUN   TestConfigValidate/negative_max_ai
--- PASS: TestConfigValidate/negative_max_ai (0.00s)
=== NAME  TestConfigValidate
=== RUN   TestConfigValidate/invalid_picker_backend
--- PASS: TestConfigValidate/invalid_picker_backend (0.00s)
=== NAME  TestConfigValidate
=== RUN   TestConfigValidate/empty_picker_backend
--- PASS: TestConfigValidate/empty_picker_backend (0.00s)
=== NAME  TestConfigValidate
=== RUN   TestConfigValidate/invalid_up_arrow_trigger
--- PASS: TestConfigValidate/invalid_up_arrow_trigger (0.00s)
=== NAME  TestConfigValidate
=== RUN   TestConfigValidate/zero_values_are_valid
--- PASS: TestConfigValidate/zero_values_are_valid (0.00s)
=== NAME  TestConfigValidate
--- PASS: TestConfigValidate (0.00s)
=== NAME  
=== RUN   TestValidatePickerPageSizeClamping
=== RUN   TestValidatePickerPageSizeClamping/below_minimum
--- PASS: TestValidatePickerPageSizeClamping/below_minimum (0.00s)
=== NAME  TestValidatePickerPageSizeClamping
=== RUN   TestValidatePickerPageSizeClamping/at_minimum
--- PASS: TestValidatePickerPageSizeClamping/at_minimum (0.00s)
=== NAME  TestValidatePickerPageSizeClamping
=== RUN   TestValidatePickerPageSizeClamping/normal
--- PASS: TestValidatePickerPageSizeClamping/normal (0.00s)
=== NAME  TestValidatePickerPageSizeClamping
=== RUN   TestValidatePickerPageSizeClamping/at_maximum
--- PASS: TestValidatePickerPageSizeClamping/at_maximum (0.00s)
=== NAME  TestValidatePickerPageSizeClamping
=== RUN   TestValidatePickerPageSizeClamping/above_maximum
--- PASS: TestValidatePickerPageSizeClamping/above_maximum (0.00s)
=== NAME  TestValidatePickerPageSizeClamping
--- PASS: TestValidatePickerPageSizeClamping (0.00s)
=== NAME  
=== RUN   TestSetPickerPageSizeClamping
=== RUN   TestSetPickerPageSizeClamping/below_minimum
2026/02/20 09:29:51 WARN config: clamped history.picker_page_size input=5 clamped=20
--- PASS: TestSetPickerPageSizeClamping/below_minimum (0.00s)
=== NAME  TestSetPickerPageSizeClamping
=== RUN   TestSetPickerPageSizeClamping/at_minimum
--- PASS: TestSetPickerPageSizeClamping/at_minimum (0.00s)
=== NAME  TestSetPickerPageSizeClamping
=== RUN   TestSetPickerPageSizeClamping/normal
--- PASS: TestSetPickerPageSizeClamping/normal (0.00s)
=== NAME  TestSetPickerPageSizeClamping
=== RUN   TestSetPickerPageSizeClamping/at_maximum
--- PASS: TestSetPickerPageSizeClamping/at_maximum (0.00s)
=== NAME  TestSetPickerPageSizeClamping
=== RUN   TestSetPickerPageSizeClamping/above_maximum
2026/02/20 09:29:51 WARN config: clamped history.picker_page_size input=999 clamped=500
--- PASS: TestSetPickerPageSizeClamping/above_maximum (0.00s)
=== NAME  TestSetPickerPageSizeClamping
--- PASS: TestSetPickerPageSizeClamping (0.00s)
=== NAME  
=== RUN   TestValidateUpArrowDoubleWindowClamping
=== RUN   TestValidateUpArrowDoubleWindowClamping/below_minimum
--- PASS: TestValidateUpArrowDoubleWindowClamping/below_minimum (0.00s)
=== NAME  TestValidateUpArrowDoubleWindowClamping
=== RUN   TestValidateUpArrowDoubleWindowClamping/at_minimum
--- PASS: TestValidateUpArrowDoubleWindowClamping/at_minimum (0.00s)
=== NAME  TestValidateUpArrowDoubleWindowClamping
=== RUN   TestValidateUpArrowDoubleWindowClamping/normal
--- PASS: TestValidateUpArrowDoubleWindowClamping/normal (0.00s)
=== NAME  TestValidateUpArrowDoubleWindowClamping
=== RUN   TestValidateUpArrowDoubleWindowClamping/at_maximum
--- PASS: TestValidateUpArrowDoubleWindowClamping/at_maximum (0.00s)
=== NAME  TestValidateUpArrowDoubleWindowClamping
=== RUN   TestValidateUpArrowDoubleWindowClamping/above_maximum
--- PASS: TestValidateUpArrowDoubleWindowClamping/above_maximum (0.00s)
=== NAME  TestValidateUpArrowDoubleWindowClamping
--- PASS: TestValidateUpArrowDoubleWindowClamping (0.00s)
=== NAME  
=== RUN   TestSetUpArrowDoubleWindowClamping
=== RUN   TestSetUpArrowDoubleWindowClamping/below_minimum
2026/02/20 09:29:51 WARN config: clamped history.up_arrow_double_window_ms input=1 clamped=50
--- PASS: TestSetUpArrowDoubleWindowClamping/below_minimum (0.00s)
=== NAME  TestSetUpArrowDoubleWindowClamping
=== RUN   TestSetUpArrowDoubleWindowClamping/at_minimum
--- PASS: TestSetUpArrowDoubleWindowClamping/at_minimum (0.00s)
=== NAME  TestSetUpArrowDoubleWindowClamping
=== RUN   TestSetUpArrowDoubleWindowClamping/normal
--- PASS: TestSetUpArrowDoubleWindowClamping/normal (0.00s)
=== NAME  TestSetUpArrowDoubleWindowClamping
=== RUN   TestSetUpArrowDoubleWindowClamping/at_maximum
--- PASS: TestSetUpArrowDoubleWindowClamping/at_maximum (0.00s)
=== NAME  TestSetUpArrowDoubleWindowClamping
=== RUN   TestSetUpArrowDoubleWindowClamping/above_maximum
2026/02/20 09:29:51 WARN config: clamped history.up_arrow_double_window_ms input=5000 clamped=1000
--- PASS: TestSetUpArrowDoubleWindowClamping/above_maximum (0.00s)
=== NAME  TestSetUpArrowDoubleWindowClamping
--- PASS: TestSetUpArrowDoubleWindowClamping (0.00s)
=== NAME  
=== RUN   TestValidLogLevels
--- PASS: TestValidLogLevels (0.00s)
=== NAME  
=== RUN   TestValidProviders
--- PASS: TestValidProviders (0.00s)
=== NAME  
=== RUN   TestValidPickerBackends
--- PASS: TestValidPickerBackends (0.00s)
=== NAME  
=== RUN   TestValidUpArrowTriggers
--- PASS: TestValidUpArrowTriggers (0.00s)
=== NAME  
=== RUN   TestLoadFromFile_NonExistent
--- PASS: TestLoadFromFile_NonExistent (0.00s)
=== NAME  
=== RUN   TestLoadFromFile_InvalidYAML
--- PASS: TestLoadFromFile_InvalidYAML (0.00s)
=== NAME  
=== RUN   TestLoadFromFile_PartialConfig
--- PASS: TestLoadFromFile_PartialConfig (0.00s)
=== NAME  
=== RUN   TestLoadFromFile_EmptyFile
--- PASS: TestLoadFromFile_EmptyFile (0.00s)
=== NAME  
=== RUN   TestLoadFromFile_ReadError
--- PASS: TestLoadFromFile_ReadError (0.00s)
=== NAME  
=== RUN   TestSaveAndLoad
--- PASS: TestSaveAndLoad (0.01s)
=== NAME  
=== RUN   TestSaveAndLoadRoundTrip
2026/02/20 09:29:51 WARN config validation warning section=suggestions field=hard_timeout_ms message="must be >= 1, got 0; falling back to default 150"
2026/02/20 09:29:51 WARN config validation warning section=suggestions field=hook_connect_timeout_ms message="must be >= 1, got 0; falling back to default 15"
2026/02/20 09:29:51 WARN config validation warning section=suggestions field=hook_write_timeout_ms message="must be >= 1, got 0; falling back to default 20"
2026/02/20 09:29:51 WARN config validation warning section=suggestions field=ingest_sync_wait_ms message="must be >= 1, got 0; falling back to default 5"
2026/02/20 09:29:51 WARN config validation warning section=suggestions field=cache_ttl_ms message="must be >= 1, got 0; falling back to default 30000"
2026/02/20 09:29:51 WARN config validation warning section=suggestions field=max_results message="must be >= 1, got 0; falling back to default 5"
2026/02/20 09:29:51 WARN config validation warning section=suggestions field=ingest_queue_max_events message="must be >= 1, got 0; falling back to default 8192"
2026/02/20 09:29:51 WARN config validation warning section=suggestions field=burst_events_threshold message="must be >= 1, got 0; falling back to default 10"
2026/02/20 09:29:51 WARN config validation warning section=suggestions field=cmd_raw_max_bytes message="must be >= 1, got 0; falling back to default 16384"
2026/02/20 09:29:51 WARN config validation warning section=suggestions field=ingest_queue_max_bytes message="must be >= 1, got 0; falling back to default 8388608"
2026/02/20 09:29:51 WARN config validation warning section=suggestions field=cache_memory_budget_mb message="must be >= 1, got 0; falling back to default 50"
2026/02/20 09:29:51 WARN config validation warning section=suggestions field=online_learning_min_samples message="must be >= 1, got 0; falling back to default 30"
2026/02/20 09:29:51 WARN config validation warning section=suggestions field=retention_max_events message="must be >= 1000, got 0; clamping to 1000"
2026/02/20 09:29:51 WARN config validation warning section=suggestions field=online_learning_eta message="must be in (0.0, 1.0], got 0.000000; falling back to default 0.020000"
2026/02/20 09:29:51 WARN config validation warning section=suggestions field=pipeline_max_segments message="must be >= 2, got 0; clamping to 2"
2026/02/20 09:29:51 WARN config validation warning section=suggestions field=directory_scope_max_depth message="must be >= 1, got 0; clamping to 1"
2026/02/20 09:29:51 WARN config validation warning section=suggestions field=incognito_mode message="must be off, ephemeral, or no_send, got \"\"; falling back to default \"ephemeral\""
2026/02/20 09:29:51 WARN config validation warning section=suggestions field=shim_mode message="must be auto, persistent, or oneshot, got \"\"; falling back to default \"auto\""
2026/02/20 09:29:51 WARN config validation warning section=suggestions field=scorer_version message="must be v1 or v2, got \"\"; falling back to default \"v2\""
2026/02/20 09:29:51 WARN config validation warning section=suggestions field=search_fts_tokenizer message="must be trigram or unicode61, got \"\"; falling back to default \"trigram\""
2026/02/20 09:29:51 WARN config validation warning section=suggestions field=picker_view message="must be compact or detailed, got \"\"; falling back to \"detailed\""
--- PASS: TestSaveAndLoadRoundTrip (0.01s)
=== NAME  
=== RUN   TestListKeys
--- PASS: TestListKeys (0.00s)
=== NAME  
=== RUN   TestListKeysAllGettable
=== RUN   TestListKeysAllGettable/suggestions.enabled
--- PASS: TestListKeysAllGettable/suggestions.enabled (0.00s)
=== NAME  TestListKeysAllGettable
=== RUN   TestListKeysAllGettable/suggestions.max_history
--- PASS: TestListKeysAllGettable/suggestions.max_history (0.00s)
=== NAME  TestListKeysAllGettable
=== RUN   TestListKeysAllGettable/suggestions.show_risk_warning
--- PASS: TestListKeysAllGettable/suggestions.show_risk_warning (0.00s)
=== NAME  TestListKeysAllGettable
=== RUN   TestListKeysAllGettable/suggestions.scorer_version
--- PASS: TestListKeysAllGettable/suggestions.scorer_version (0.00s)
=== NAME  TestListKeysAllGettable
=== RUN   TestListKeysAllGettable/suggestions.picker_view
--- PASS: TestListKeysAllGettable/suggestions.picker_view (0.00s)
=== NAME  TestListKeysAllGettable
=== RUN   TestListKeysAllGettable/history.picker_backend
--- PASS: TestListKeysAllGettable/history.picker_backend (0.00s)
=== NAME  TestListKeysAllGettable
=== RUN   TestListKeysAllGettable/history.picker_open_on_empty
--- PASS: TestListKeysAllGettable/history.picker_open_on_empty (0.00s)
=== NAME  TestListKeysAllGettable
=== RUN   TestListKeysAllGettable/history.picker_page_size
--- PASS: TestListKeysAllGettable/history.picker_page_size (0.00s)
=== NAME  TestListKeysAllGettable
=== RUN   TestListKeysAllGettable/history.picker_case_sensitive
--- PASS: TestListKeysAllGettable/history.picker_case_sensitive (0.00s)
=== NAME  TestListKeysAllGettable
=== RUN   TestListKeysAllGettable/history.up_arrow_trigger
--- PASS: TestListKeysAllGettable/history.up_arrow_trigger (0.00s)
=== NAME  TestListKeysAllGettable
=== RUN   TestListKeysAllGettable/history.up_arrow_double_window_ms
--- PASS: TestListKeysAllGettable/history.up_arrow_double_window_ms (0.00s)
=== NAME  TestListKeysAllGettable
--- PASS: TestListKeysAllGettable (0.00s)
=== NAME  
=== RUN   TestListKeysAllSettable
=== RUN   TestListKeysAllSettable/suggestions.enabled
--- PASS: TestListKeysAllSettable/suggestions.enabled (0.00s)
=== NAME  TestListKeysAllSettable
=== RUN   TestListKeysAllSettable/suggestions.max_history
--- PASS: TestListKeysAllSettable/suggestions.max_history (0.00s)
=== NAME  TestListKeysAllSettable
=== RUN   TestListKeysAllSettable/suggestions.show_risk_warning
--- PASS: TestListKeysAllSettable/suggestions.show_risk_warning (0.00s)
=== NAME  TestListKeysAllSettable
=== RUN   TestListKeysAllSettable/suggestions.scorer_version
--- PASS: TestListKeysAllSettable/suggestions.scorer_version (0.00s)
=== NAME  TestListKeysAllSettable
=== RUN   TestListKeysAllSettable/suggestions.picker_view
--- PASS: TestListKeysAllSettable/suggestions.picker_view (0.00s)
=== NAME  TestListKeysAllSettable
=== RUN   TestListKeysAllSettable/history.picker_backend
--- PASS: TestListKeysAllSettable/history.picker_backend (0.00s)
=== NAME  TestListKeysAllSettable
=== RUN   TestListKeysAllSettable/history.picker_open_on_empty
--- PASS: TestListKeysAllSettable/history.picker_open_on_empty (0.00s)
=== NAME  TestListKeysAllSettable
=== RUN   TestListKeysAllSettable/history.picker_page_size
--- PASS: TestListKeysAllSettable/history.picker_page_size (0.00s)
=== NAME  TestListKeysAllSettable
=== RUN   TestListKeysAllSettable/history.picker_case_sensitive
--- PASS: TestListKeysAllSettable/history.picker_case_sensitive (0.00s)
=== NAME  TestListKeysAllSettable
=== RUN   TestListKeysAllSettable/history.up_arrow_trigger
--- PASS: TestListKeysAllSettable/history.up_arrow_trigger (0.00s)
=== NAME  TestListKeysAllSettable
=== RUN   TestListKeysAllSettable/history.up_arrow_double_window_ms
--- PASS: TestListKeysAllSettable/history.up_arrow_double_window_ms (0.00s)
=== NAME  TestListKeysAllSettable
--- PASS: TestListKeysAllSettable (0.00s)
=== NAME  
=== RUN   TestDefaultHistoryConfig
--- PASS: TestDefaultHistoryConfig (0.00s)
=== NAME  
=== RUN   TestDefaultConfigIsValid
--- PASS: TestDefaultConfigIsValid (0.00s)
=== NAME  
=== RUN   TestDefaultPaths
--- PASS: TestDefaultPaths (0.00s)
=== NAME  
=== RUN   TestDefaultPaths_CLAIHome
--- PASS: TestDefaultPaths_CLAIHome (0.00s)
=== NAME  
=== RUN   TestPaths_DerivedDirs
=== RUN   TestPaths_DerivedDirs/CacheDir
--- PASS: TestPaths_DerivedDirs/CacheDir (0.00s)
=== NAME  TestPaths_DerivedDirs
=== RUN   TestPaths_DerivedDirs/LogDir
--- PASS: TestPaths_DerivedDirs/LogDir (0.00s)
=== NAME  TestPaths_DerivedDirs
=== RUN   TestPaths_DerivedDirs/HooksDir
--- PASS: TestPaths_DerivedDirs/HooksDir (0.00s)
=== NAME  TestPaths_DerivedDirs
--- PASS: TestPaths_DerivedDirs (0.00s)
=== NAME  
=== RUN   TestPaths_ConfigFile
--- PASS: TestPaths_ConfigFile (0.00s)
=== NAME  
=== RUN   TestPaths_DatabaseFile
--- PASS: TestPaths_DatabaseFile (0.00s)
=== NAME  
=== RUN   TestPaths_SocketFile
--- PASS: TestPaths_SocketFile (0.00s)
=== NAME  
=== RUN   TestPaths_PIDFile
--- PASS: TestPaths_PIDFile (0.00s)
=== NAME  
=== RUN   TestPaths_LogDir
--- PASS: TestPaths_LogDir (0.00s)
=== NAME  
=== RUN   TestPaths_LogFile
--- PASS: TestPaths_LogFile (0.00s)
=== NAME  
=== RUN   TestPaths_HooksDir
--- PASS: TestPaths_HooksDir (0.00s)
=== NAME  
=== RUN   TestPaths_SuggestionFile
--- PASS: TestPaths_SuggestionFile (0.00s)
=== NAME  
=== RUN   TestPaths_EnsureDirectories
--- PASS: TestPaths_EnsureDirectories (0.00s)
=== NAME  
=== RUN   TestHomeDir
--- PASS: TestHomeDir (0.00s)
=== NAME  
=== RUN   TestDefaultPaths_Windows
    paths_test.go:198: Windows-specific test
--- SKIP: TestDefaultPaths_Windows (0.00s)
=== NAME  
=== RUN   TestDefaultSuggestionsConfig_Core
--- PASS: TestDefaultSuggestionsConfig_Core (0.00s)
=== NAME  
=== RUN   TestDefaultSuggestionsConfig_HookTransport
--- PASS: TestDefaultSuggestionsConfig_HookTransport (0.00s)
=== NAME  
=== RUN   TestDefaultSuggestionsConfig_Weights
--- PASS: TestDefaultSuggestionsConfig_Weights (0.00s)
=== NAME  
=== RUN   TestDefaultSuggestionsConfig_Learning
--- PASS: TestDefaultSuggestionsConfig_Learning (0.00s)
=== NAME  
=== RUN   TestDefaultSuggestionsConfig_Backpressure
--- PASS: TestDefaultSuggestionsConfig_Backpressure (0.00s)
=== NAME  
=== RUN   TestDefaultSuggestionsConfig_TaskDiscovery
--- PASS: TestDefaultSuggestionsConfig_TaskDiscovery (0.00s)
=== NAME  
=== RUN   TestDefaultSuggestionsConfig_Search
--- PASS: TestDefaultSuggestionsConfig_Search (0.00s)
=== NAME  
=== RUN   TestDefaultSuggestionsConfig_ProjectType
--- PASS: TestDefaultSuggestionsConfig_ProjectType (0.00s)
=== NAME  
=== RUN   TestDefaultSuggestionsConfig_Pipeline
--- PASS: TestDefaultSuggestionsConfig_Pipeline (0.00s)
=== NAME  
=== RUN   TestDefaultSuggestionsConfig_FailureRecovery
--- PASS: TestDefaultSuggestionsConfig_FailureRecovery (0.00s)
=== NAME  
=== RUN   TestDefaultSuggestionsConfig_Workflow
--- PASS: TestDefaultSuggestionsConfig_Workflow (0.00s)
=== NAME  
=== RUN   TestDefaultSuggestionsConfig_AdaptiveTiming
--- PASS: TestDefaultSuggestionsConfig_AdaptiveTiming (0.00s)
=== NAME  
=== RUN   TestDefaultSuggestionsConfig_Alias
--- PASS: TestDefaultSuggestionsConfig_Alias (0.00s)
=== NAME  
=== RUN   TestDefaultSuggestionsConfig_Dismissal
--- PASS: TestDefaultSuggestionsConfig_Dismissal (0.00s)
=== NAME  
=== RUN   TestDefaultSuggestionsConfig_DirectoryScope
--- PASS: TestDefaultSuggestionsConfig_DirectoryScope (0.00s)
=== NAME  
=== RUN   TestDefaultSuggestionsConfig_Explainability
--- PASS: TestDefaultSuggestionsConfig_Explainability (0.00s)
=== NAME  
=== RUN   TestDefaultSuggestionsConfig_ExtendedPlaybook
--- PASS: TestDefaultSuggestionsConfig_ExtendedPlaybook (0.00s)
=== NAME  
=== RUN   TestDefaultSuggestionsConfig_Discovery
--- PASS: TestDefaultSuggestionsConfig_Discovery (0.00s)
=== NAME  
=== RUN   TestDefaultSuggestionsConfig_Storage
--- PASS: TestDefaultSuggestionsConfig_Storage (0.00s)
=== NAME  
=== RUN   TestDefaultSuggestionsConfig_Cache
--- PASS: TestDefaultSuggestionsConfig_Cache (0.00s)
=== NAME  
=== RUN   TestDefaultSuggestionsConfig_Privacy
--- PASS: TestDefaultSuggestionsConfig_Privacy (0.00s)
=== NAME  
=== RUN   TestDefaultSuggestionsConfig_Legacy
--- PASS: TestDefaultSuggestionsConfig_Legacy (0.00s)
=== NAME  
=== RUN   TestValidateAndFix_DefaultsProduceNoWarnings
--- PASS: TestValidateAndFix_DefaultsProduceNoWarnings (0.00s)
=== NAME  
=== RUN   TestValidateAndFix_NegativeTimeouts
=== RUN   TestValidateAndFix_NegativeTimeouts/hard_timeout_ms=0
2026/02/20 09:29:51 WARN config validation warning section=suggestions field=hard_timeout_ms message="must be >= 1, got 0; falling back to default 150"
--- PASS: TestValidateAndFix_NegativeTimeouts/hard_timeout_ms=0 (0.00s)
=== NAME  TestValidateAndFix_NegativeTimeouts
=== RUN   TestValidateAndFix_NegativeTimeouts/hard_timeout_ms=-1
2026/02/20 09:29:51 WARN config validation warning section=suggestions field=hard_timeout_ms message="must be >= 1, got -1; falling back to default 150"
--- PASS: TestValidateAndFix_NegativeTimeouts/hard_timeout_ms=-1 (0.00s)
=== NAME  TestValidateAndFix_NegativeTimeouts
=== RUN   TestValidateAndFix_NegativeTimeouts/hook_connect_timeout_ms=0
2026/02/20 09:29:51 WARN config validation warning section=suggestions field=hook_connect_timeout_ms message="must be >= 1, got 0; falling back to default 15"
--- PASS: TestValidateAndFix_NegativeTimeouts/hook_connect_timeout_ms=0 (0.00s)
=== NAME  TestValidateAndFix_NegativeTimeouts
=== RUN   TestValidateAndFix_NegativeTimeouts/hook_write_timeout_ms=-5
2026/02/20 09:29:51 WARN config validation warning section=suggestions field=hook_write_timeout_ms message="must be >= 1, got -5; falling back to default 20"
--- PASS: TestValidateAndFix_NegativeTimeouts/hook_write_timeout_ms=-5 (0.00s)
=== NAME  TestValidateAndFix_NegativeTimeouts
=== RUN   TestValidateAndFix_NegativeTimeouts/ingest_sync_wait_ms=0
2026/02/20 09:29:51 WARN config validation warning section=suggestions field=ingest_sync_wait_ms message="must be >= 1, got 0; falling back to default 5"
--- PASS: TestValidateAndFix_NegativeTimeouts/ingest_sync_wait_ms=0 (0.00s)
=== NAME  TestValidateAndFix_NegativeTimeouts
=== RUN   TestValidateAndFix_NegativeTimeouts/cache_ttl_ms=-100
2026/02/20 09:29:51 WARN config validation warning section=suggestions field=cache_ttl_ms message="must be >= 1, got -100; falling back to default 30000"
--- PASS: TestValidateAndFix_NegativeTimeouts/cache_ttl_ms=-100 (0.00s)
=== NAME  TestValidateAndFix_NegativeTimeouts
--- PASS: TestValidateAndFix_NegativeTimeouts (0.00s)
=== NAME  
=== RUN   TestValidateAndFix_WeightsClamping
=== RUN   TestValidateAndFix_WeightsClamping/negative_transition
2026/02/20 09:29:51 WARN config validation warning section=suggestions field=weights.transition message="must be >= 0.0, got -0.500000; clamping to 0.0"
--- PASS: TestValidateAndFix_WeightsClamping/negative_transition (0.00s)
=== NAME  TestValidateAndFix_WeightsClamping
=== RUN   TestValidateAndFix_WeightsClamping/above_one_frequency
2026/02/20 09:29:51 WARN config validation warning section=suggestions field=weights.frequency message="must be <= 1.0, got 1.500000; clamping to 1.0"
--- PASS: TestValidateAndFix_WeightsClamping/above_one_frequency (0.00s)
=== NAME  TestValidateAndFix_WeightsClamping
=== RUN   TestValidateAndFix_WeightsClamping/negative_risk_penalty
2026/02/20 09:29:51 WARN config validation warning section=suggestions field=weights.risk_penalty message="must be >= 0.0, got -0.010000; clamping to 0.0"
--- PASS: TestValidateAndFix_WeightsClamping/negative_risk_penalty (0.00s)
=== NAME  TestValidateAndFix_WeightsClamping
=== RUN   TestValidateAndFix_WeightsClamping/above_one_feedback
2026/02/20 09:29:51 WARN config validation warning section=suggestions field=weights.feedback message="must be <= 1.0, got 2.000000; clamping to 1.0"
--- PASS: TestValidateAndFix_WeightsClamping/above_one_feedback (0.00s)
=== NAME  TestValidateAndFix_WeightsClamping
=== RUN   TestValidateAndFix_WeightsClamping/above_one_project_type
2026/02/20 09:29:51 WARN config validation warning section=suggestions field=weights.project_type_affinity message="must be <= 1.0, got 99.000000; clamping to 1.0"
--- PASS: TestValidateAndFix_WeightsClamping/above_one_project_type (0.00s)
=== NAME  TestValidateAndFix_WeightsClamping
=== RUN   TestValidateAndFix_WeightsClamping/negative_failure_recovery
2026/02/20 09:29:51 WARN config validation warning section=suggestions field=weights.failure_recovery message="must be >= 0.0, got -1.000000; clamping to 0.0"
--- PASS: TestValidateAndFix_WeightsClamping/negative_failure_recovery (0.00s)
=== NAME  TestValidateAndFix_WeightsClamping
--- PASS: TestValidateAndFix_WeightsClamping (0.00s)
=== NAME  
=== RUN   TestValidateAndFix_ValidWeightsNoWarning
--- PASS: TestValidateAndFix_ValidWeightsNoWarning (0.00s)
=== NAME  
=== RUN   TestValidateAndFix_ZeroCounts
=== RUN   TestValidateAndFix_ZeroCounts/max_results=0
2026/02/20 09:29:51 WARN config validation warning section=suggestions field=max_results message="must be >= 1, got 0; falling back to default 5"
--- PASS: TestValidateAndFix_ZeroCounts/max_results=0 (0.00s)
=== NAME  TestValidateAndFix_ZeroCounts
=== RUN   TestValidateAndFix_ZeroCounts/ingest_queue_max_events=0
2026/02/20 09:29:51 WARN config validation warning section=suggestions field=ingest_queue_max_events message="must be >= 1, got 0; falling back to default 8192"
--- PASS: TestValidateAndFix_ZeroCounts/ingest_queue_max_events=0 (0.00s)
=== NAME  TestValidateAndFix_ZeroCounts
=== RUN   TestValidateAndFix_ZeroCounts/burst_events_threshold=-1
2026/02/20 09:29:51 WARN config validation warning section=suggestions field=burst_events_threshold message="must be >= 1, got -1; falling back to default 10"
--- PASS: TestValidateAndFix_ZeroCounts/burst_events_threshold=-1 (0.00s)
=== NAME  TestValidateAndFix_ZeroCounts
--- PASS: TestValidateAndFix_ZeroCounts (0.00s)
=== NAME  
=== RUN   TestValidateAndFix_ByteSizes
=== RUN   TestValidateAndFix_ByteSizes/cmd_raw_max_bytes=0
2026/02/20 09:29:51 WARN config validation warning section=suggestions field=cmd_raw_max_bytes message="must be >= 1, got 0; falling back to default 16384"
--- PASS: TestValidateAndFix_ByteSizes/cmd_raw_max_bytes=0 (0.00s)
=== NAME  TestValidateAndFix_ByteSizes
=== RUN   TestValidateAndFix_ByteSizes/ingest_queue_max_bytes=-1
2026/02/20 09:29:51 WARN config validation warning section=suggestions field=ingest_queue_max_bytes message="must be >= 1, got -1; falling back to default 8388608"
--- PASS: TestValidateAndFix_ByteSizes/ingest_queue_max_bytes=-1 (0.00s)
=== NAME  TestValidateAndFix_ByteSizes
=== RUN   TestValidateAndFix_ByteSizes/cache_memory_budget_mb=0
2026/02/20 09:29:51 WARN config validation warning section=suggestions field=cache_memory_budget_mb message="must be >= 1, got 0; falling back to default 50"
--- PASS: TestValidateAndFix_ByteSizes/cache_memory_budget_mb=0 (0.00s)
=== NAME  TestValidateAndFix_ByteSizes
--- PASS: TestValidateAndFix_ByteSizes (0.00s)
=== NAME  
=== RUN   TestValidateAndFix_RetentionDays
2026/02/20 09:29:51 WARN config validation warning section=suggestions field=retention_days message="must be >= 0, got -1; falling back to default 90"
--- PASS: TestValidateAndFix_RetentionDays (0.00s)
=== NAME  
=== RUN   TestValidateAndFix_RetentionMaxEvents
2026/02/20 09:29:51 WARN config validation warning section=suggestions field=retention_max_events message="must be >= 1000, got 500; clamping to 1000"
--- PASS: TestValidateAndFix_RetentionMaxEvents (0.00s)
=== NAME  
=== RUN   TestValidateAndFix_OnlineLearningEta
=== RUN   TestValidateAndFix_OnlineLearningEta/zero
2026/02/20 09:29:51 WARN config validation warning section=suggestions field=online_learning_eta message="must be in (0.0, 1.0], got 0.000000; falling back to default 0.020000"
--- PASS: TestValidateAndFix_OnlineLearningEta/zero (0.00s)
=== NAME  TestValidateAndFix_OnlineLearningEta
=== RUN   TestValidateAndFix_OnlineLearningEta/negative
2026/02/20 09:29:51 WARN config validation warning section=suggestions field=online_learning_eta message="must be in (0.0, 1.0], got -0.010000; falling back to default 0.020000"
--- PASS: TestValidateAndFix_OnlineLearningEta/negative (0.00s)
=== NAME  TestValidateAndFix_OnlineLearningEta
=== RUN   TestValidateAndFix_OnlineLearningEta/above_one
2026/02/20 09:29:51 WARN config validation warning section=suggestions field=online_learning_eta message="must be in (0.0, 1.0], got 1.100000; falling back to default 0.020000"
--- PASS: TestValidateAndFix_OnlineLearningEta/above_one (0.00s)
=== NAME  TestValidateAndFix_OnlineLearningEta
=== RUN   TestValidateAndFix_OnlineLearningEta/exactly_one
--- PASS: TestValidateAndFix_OnlineLearningEta/exactly_one (0.00s)
=== NAME  TestValidateAndFix_OnlineLearningEta
=== RUN   TestValidateAndFix_OnlineLearningEta/valid_small
--- PASS: TestValidateAndFix_OnlineLearningEta/valid_small (0.00s)
=== NAME  TestValidateAndFix_OnlineLearningEta
=== RUN   TestValidateAndFix_OnlineLearningEta/valid_default
--- PASS: TestValidateAndFix_OnlineLearningEta/valid_default (0.00s)
=== NAME  TestValidateAndFix_OnlineLearningEta
--- PASS: TestValidateAndFix_OnlineLearningEta (0.00s)
=== NAME  
=== RUN   TestValidateAndFix_OnlineLearningMinSamples
2026/02/20 09:29:51 WARN config validation warning section=suggestions field=online_learning_min_samples message="must be >= 1, got 0; falling back to default 30"
--- PASS: TestValidateAndFix_OnlineLearningMinSamples (0.00s)
=== NAME  
=== RUN   TestValidateAndFix_WorkflowMinMaxSteps
2026/02/20 09:29:51 WARN config validation warning section=suggestions field=workflow_min_steps/workflow_max_steps message="min (10) > max (5); falling back to defaults min=3, max=6"
--- PASS: TestValidateAndFix_WorkflowMinMaxSteps (0.00s)
=== NAME  
=== RUN   TestValidateAndFix_PipelineMaxSegments
=== RUN   TestValidateAndFix_PipelineMaxSegments/below_min
2026/02/20 09:29:51 WARN config validation warning section=suggestions field=pipeline_max_segments message="must be >= 2, got 1; clamping to 2"
--- PASS: TestValidateAndFix_PipelineMaxSegments/below_min (0.00s)
=== NAME  TestValidateAndFix_PipelineMaxSegments
=== RUN   TestValidateAndFix_PipelineMaxSegments/at_min
--- PASS: TestValidateAndFix_PipelineMaxSegments/at_min (0.00s)
=== NAME  TestValidateAndFix_PipelineMaxSegments
=== RUN   TestValidateAndFix_PipelineMaxSegments/normal
--- PASS: TestValidateAndFix_PipelineMaxSegments/normal (0.00s)
=== NAME  TestValidateAndFix_PipelineMaxSegments
=== RUN   TestValidateAndFix_PipelineMaxSegments/at_max
--- PASS: TestValidateAndFix_PipelineMaxSegments/at_max (0.00s)
=== NAME  TestValidateAndFix_PipelineMaxSegments
=== RUN   TestValidateAndFix_PipelineMaxSegments/above_max
2026/02/20 09:29:51 WARN config validation warning section=suggestions field=pipeline_max_segments message="must be <= 32, got 100; clamping to 32"
--- PASS: TestValidateAndFix_PipelineMaxSegments/above_max (0.00s)
=== NAME  TestValidateAndFix_PipelineMaxSegments
--- PASS: TestValidateAndFix_PipelineMaxSegments (0.00s)
=== NAME  
=== RUN   TestValidateAndFix_DirectoryScopeMaxDepth
=== RUN   TestValidateAndFix_DirectoryScopeMaxDepth/below_min
2026/02/20 09:29:51 WARN config validation warning section=suggestions field=directory_scope_max_depth message="must be >= 1, got 0; clamping to 1"
--- PASS: TestValidateAndFix_DirectoryScopeMaxDepth/below_min (0.00s)
=== NAME  TestValidateAndFix_DirectoryScopeMaxDepth
=== RUN   TestValidateAndFix_DirectoryScopeMaxDepth/at_min
--- PASS: TestValidateAndFix_DirectoryScopeMaxDepth/at_min (0.00s)
=== NAME  TestValidateAndFix_DirectoryScopeMaxDepth
=== RUN   TestValidateAndFix_DirectoryScopeMaxDepth/normal
--- PASS: TestValidateAndFix_DirectoryScopeMaxDepth/normal (0.00s)
=== NAME  TestValidateAndFix_DirectoryScopeMaxDepth
=== RUN   TestValidateAndFix_DirectoryScopeMaxDepth/at_max
--- PASS: TestValidateAndFix_DirectoryScopeMaxDepth/at_max (0.00s)
=== NAME  TestValidateAndFix_DirectoryScopeMaxDepth
=== RUN   TestValidateAndFix_DirectoryScopeMaxDepth/above_max
2026/02/20 09:29:51 WARN config validation warning section=suggestions field=directory_scope_max_depth message="must be <= 10, got 20; clamping to 10"
--- PASS: TestValidateAndFix_DirectoryScopeMaxDepth/above_max (0.00s)
=== NAME  TestValidateAndFix_DirectoryScopeMaxDepth
--- PASS: TestValidateAndFix_DirectoryScopeMaxDepth (0.00s)
=== NAME  
=== RUN   TestValidateAndFix_IncognitoMode
=== RUN   TestValidateAndFix_IncognitoMode/valid_off
--- PASS: TestValidateAndFix_IncognitoMode/valid_off (0.00s)
=== NAME  TestValidateAndFix_IncognitoMode
=== RUN   TestValidateAndFix_IncognitoMode/valid_ephemeral
--- PASS: TestValidateAndFix_IncognitoMode/valid_ephemeral (0.00s)
=== NAME  TestValidateAndFix_IncognitoMode
=== RUN   TestValidateAndFix_IncognitoMode/valid_no_send
--- PASS: TestValidateAndFix_IncognitoMode/valid_no_send (0.00s)
=== NAME  TestValidateAndFix_IncognitoMode
=== RUN   TestValidateAndFix_IncognitoMode/invalid_
2026/02/20 09:29:51 WARN config validation warning section=suggestions field=incognito_mode message="must be off, ephemeral, or no_send, got \"\"; falling back to default \"ephemeral\""
--- PASS: TestValidateAndFix_IncognitoMode/invalid_ (0.00s)
=== NAME  TestValidateAndFix_IncognitoMode
=== RUN   TestValidateAndFix_IncognitoMode/invalid_full
2026/02/20 09:29:51 WARN config validation warning section=suggestions field=incognito_mode message="must be off, ephemeral, or no_send, got \"full\"; falling back to default \"ephemeral\""
--- PASS: TestValidateAndFix_IncognitoMode/invalid_full (0.00s)
=== NAME  TestValidateAndFix_IncognitoMode
=== RUN   TestValidateAndFix_IncognitoMode/invalid_ON
2026/02/20 09:29:51 WARN config validation warning section=suggestions field=incognito_mode message="must be off, ephemeral, or no_send, got \"ON\"; falling back to default \"ephemeral\""
--- PASS: TestValidateAndFix_IncognitoMode/invalid_ON (0.00s)
=== NAME  TestValidateAndFix_IncognitoMode
=== RUN   TestValidateAndFix_IncognitoMode/invalid_disabled
2026/02/20 09:29:51 WARN config validation warning section=suggestions field=incognito_mode message="must be off, ephemeral, or no_send, got \"disabled\"; falling back to default \"ephemeral\""
--- PASS: TestValidateAndFix_IncognitoMode/invalid_disabled (0.00s)
=== NAME  TestValidateAndFix_IncognitoMode
--- PASS: TestValidateAndFix_IncognitoMode (0.00s)
=== NAME  
=== RUN   TestValidateAndFix_ShimMode
=== RUN   TestValidateAndFix_ShimMode/valid_auto
--- PASS: TestValidateAndFix_ShimMode/valid_auto (0.00s)
=== NAME  TestValidateAndFix_ShimMode
=== RUN   TestValidateAndFix_ShimMode/valid_persistent
--- PASS: TestValidateAndFix_ShimMode/valid_persistent (0.00s)
=== NAME  TestValidateAndFix_ShimMode
=== RUN   TestValidateAndFix_ShimMode/valid_oneshot
--- PASS: TestValidateAndFix_ShimMode/valid_oneshot (0.00s)
=== NAME  TestValidateAndFix_ShimMode
=== RUN   TestValidateAndFix_ShimMode/invalid_
2026/02/20 09:29:51 WARN config validation warning section=suggestions field=shim_mode message="must be auto, persistent, or oneshot, got \"\"; falling back to default \"auto\""
--- PASS: TestValidateAndFix_ShimMode/invalid_ (0.00s)
=== NAME  TestValidateAndFix_ShimMode
=== RUN   TestValidateAndFix_ShimMode/invalid_manual
2026/02/20 09:29:51 WARN config validation warning section=suggestions field=shim_mode message="must be auto, persistent, or oneshot, got \"manual\"; falling back to default \"auto\""
--- PASS: TestValidateAndFix_ShimMode/invalid_manual (0.00s)
=== NAME  TestValidateAndFix_ShimMode
=== RUN   TestValidateAndFix_ShimMode/invalid_AUTO
2026/02/20 09:29:51 WARN config validation warning section=suggestions field=shim_mode message="must be auto, persistent, or oneshot, got \"AUTO\"; falling back to default \"auto\""
--- PASS: TestValidateAndFix_ShimMode/invalid_AUTO (0.00s)
=== NAME  TestValidateAndFix_ShimMode
--- PASS: TestValidateAndFix_ShimMode (0.00s)
=== NAME  
=== RUN   TestValidateAndFix_SearchFTSTokenizer
=== RUN   TestValidateAndFix_SearchFTSTokenizer/valid_trigram
--- PASS: TestValidateAndFix_SearchFTSTokenizer/valid_trigram (0.00s)
=== NAME  TestValidateAndFix_SearchFTSTokenizer
=== RUN   TestValidateAndFix_SearchFTSTokenizer/valid_unicode61
--- PASS: TestValidateAndFix_SearchFTSTokenizer/valid_unicode61 (0.00s)
=== NAME  TestValidateAndFix_SearchFTSTokenizer
=== RUN   TestValidateAndFix_SearchFTSTokenizer/invalid_
2026/02/20 09:29:51 WARN config validation warning section=suggestions field=search_fts_tokenizer message="must be trigram or unicode61, got \"\"; falling back to default \"trigram\""
--- PASS: TestValidateAndFix_SearchFTSTokenizer/invalid_ (0.00s)
=== NAME  TestValidateAndFix_SearchFTSTokenizer
=== RUN   TestValidateAndFix_SearchFTSTokenizer/invalid_porter
2026/02/20 09:29:51 WARN config validation warning section=suggestions field=search_fts_tokenizer message="must be trigram or unicode61, got \"porter\"; falling back to default \"trigram\""
--- PASS: TestValidateAndFix_SearchFTSTokenizer/invalid_porter (0.00s)
=== NAME  TestValidateAndFix_SearchFTSTokenizer
=== RUN   TestValidateAndFix_SearchFTSTokenizer/invalid_TRIGRAM
2026/02/20 09:29:51 WARN config validation warning section=suggestions field=search_fts_tokenizer message="must be trigram or unicode61, got \"TRIGRAM\"; falling back to default \"trigram\""
--- PASS: TestValidateAndFix_SearchFTSTokenizer/invalid_TRIGRAM (0.00s)
=== NAME  TestValidateAndFix_SearchFTSTokenizer
--- PASS: TestValidateAndFix_SearchFTSTokenizer (0.00s)
=== NAME  
=== RUN   TestValidateAndFix_NeverPreventsStartup
2026/02/20 09:29:51 WARN config validation warning section=suggestions field=hard_timeout_ms message="must be >= 1, got -1; falling back to default 150"
2026/02/20 09:29:51 WARN config validation warning section=suggestions field=hook_connect_timeout_ms message="must be >= 1, got -1; falling back to default 15"
2026/02/20 09:29:51 WARN config validation warning section=suggestions field=hook_write_timeout_ms message="must be >= 1, got -1; falling back to default 20"
2026/02/20 09:29:51 WARN config validation warning section=suggestions field=ingest_sync_wait_ms message="must be >= 1, got -1; falling back to default 5"
2026/02/20 09:29:51 WARN config validation warning section=suggestions field=cache_ttl_ms message="must be >= 1, got -1; falling back to default 30000"
2026/02/20 09:29:51 WARN config validation warning section=suggestions field=max_results message="must be >= 1, got 0; falling back to default 5"
2026/02/20 09:29:51 WARN config validation warning section=suggestions field=ingest_queue_max_events message="must be >= 1, got 0; falling back to default 8192"
2026/02/20 09:29:51 WARN config validation warning section=suggestions field=burst_events_threshold message="must be >= 1, got 0; falling back to default 10"
2026/02/20 09:29:51 WARN config validation warning section=suggestions field=cmd_raw_max_bytes message="must be >= 1, got 0; falling back to default 16384"
2026/02/20 09:29:51 WARN config validation warning section=suggestions field=ingest_queue_max_bytes message="must be >= 1, got 0; falling back to default 8388608"
2026/02/20 09:29:51 WARN config validation warning section=suggestions field=cache_memory_budget_mb message="must be >= 1, got 0; falling back to default 50"
2026/02/20 09:29:51 WARN config validation warning section=suggestions field=online_learning_min_samples message="must be >= 1, got 0; falling back to default 30"
2026/02/20 09:29:51 WARN config validation warning section=suggestions field=retention_days message="must be >= 0, got -5; falling back to default 90"
2026/02/20 09:29:51 WARN config validation warning section=suggestions field=retention_max_events message="must be >= 1000, got 10; clamping to 1000"
2026/02/20 09:29:51 WARN config validation warning section=suggestions field=online_learning_eta message="must be in (0.0, 1.0], got 0.000000; falling back to default 0.020000"
2026/02/20 09:29:51 WARN config validation warning section=suggestions field=workflow_min_steps/workflow_max_steps message="min (10) > max (2); falling back to defaults min=3, max=6"
2026/02/20 09:29:51 WARN config validation warning section=suggestions field=pipeline_max_segments message="must be >= 2, got 0; clamping to 2"
2026/02/20 09:29:51 WARN config validation warning section=suggestions field=directory_scope_max_depth message="must be >= 1, got 0; clamping to 1"
2026/02/20 09:29:51 WARN config validation warning section=suggestions field=incognito_mode message="must be off, ephemeral, or no_send, got \"invalid\"; falling back to default \"ephemeral\""
2026/02/20 09:29:51 WARN config validation warning section=suggestions field=shim_mode message="must be auto, persistent, or oneshot, got \"invalid\"; falling back to default \"auto\""
2026/02/20 09:29:51 WARN config validation warning section=suggestions field=scorer_version message="must be v1 or v2, got \"\"; falling back to default \"v2\""
2026/02/20 09:29:51 WARN config validation warning section=suggestions field=search_fts_tokenizer message="must be trigram or unicode61, got \"invalid\"; falling back to default \"trigram\""
2026/02/20 09:29:51 WARN config validation warning section=suggestions field=picker_view message="must be compact or detailed, got \"\"; falling back to \"detailed\""
--- PASS: TestValidateAndFix_NeverPreventsStartup (0.00s)
=== NAME  
=== RUN   TestApplyEnvOverrides_SuggestionsEnabled
=== RUN   TestApplyEnvOverrides_SuggestionsEnabled/disable
--- PASS: TestApplyEnvOverrides_SuggestionsEnabled/disable (0.00s)
=== NAME  TestApplyEnvOverrides_SuggestionsEnabled
=== RUN   TestApplyEnvOverrides_SuggestionsEnabled/enable
--- PASS: TestApplyEnvOverrides_SuggestionsEnabled/enable (0.00s)
=== NAME  TestApplyEnvOverrides_SuggestionsEnabled
=== RUN   TestApplyEnvOverrides_SuggestionsEnabled/zero
--- PASS: TestApplyEnvOverrides_SuggestionsEnabled/zero (0.00s)
=== NAME  TestApplyEnvOverrides_SuggestionsEnabled
=== RUN   TestApplyEnvOverrides_SuggestionsEnabled/one
--- PASS: TestApplyEnvOverrides_SuggestionsEnabled/one (0.00s)
=== NAME  TestApplyEnvOverrides_SuggestionsEnabled
--- PASS: TestApplyEnvOverrides_SuggestionsEnabled (0.00s)
=== NAME  
=== RUN   TestApplyEnvOverrides_SuggestionsEnabledInvalid
--- PASS: TestApplyEnvOverrides_SuggestionsEnabledInvalid (0.00s)
=== NAME  
=== RUN   TestApplyEnvOverrides_Debug
--- PASS: TestApplyEnvOverrides_Debug (0.00s)
=== NAME  
=== RUN   TestApplyEnvOverrides_DebugFalse
--- PASS: TestApplyEnvOverrides_DebugFalse (0.00s)
=== NAME  
=== RUN   TestApplyEnvOverrides_LogLevel
--- PASS: TestApplyEnvOverrides_LogLevel (0.00s)
=== NAME  
=== RUN   TestApplyEnvOverrides_LogLevelInvalid
--- PASS: TestApplyEnvOverrides_LogLevelInvalid (0.00s)
=== NAME  
=== RUN   TestApplyEnvOverrides_SocketPath
--- PASS: TestApplyEnvOverrides_SocketPath (0.00s)
=== NAME  
=== RUN   TestApplyEnvOverrides_DebugAndLogLevel
--- PASS: TestApplyEnvOverrides_DebugAndLogLevel (0.00s)
=== NAME  
=== RUN   TestApplyEnvOverrides_NoEnvVarsSet
--- PASS: TestApplyEnvOverrides_NoEnvVarsSet (0.00s)
=== NAME  
=== RUN   TestSuggestionsConfigYAMLRoundTrip
--- PASS: TestSuggestionsConfigYAMLRoundTrip (0.01s)
=== NAME  
=== RUN   TestLoadFromFile_AppliesEnvOverrides
--- PASS: TestLoadFromFile_AppliesEnvOverrides (0.01s)
=== NAME  
=== RUN   TestLoadFromFile_NonExistentAppliesEnvOverrides
--- PASS: TestLoadFromFile_NonExistentAppliesEnvOverrides (0.00s)
=== NAME  
=== RUN   TestIsValidIncognitoMode
--- PASS: TestIsValidIncognitoMode (0.00s)
=== NAME  
=== RUN   TestIsValidShimMode
--- PASS: TestIsValidShimMode (0.00s)
=== NAME  
=== RUN   TestIsValidFTSTokenizer
--- PASS: TestIsValidFTSTokenizer (0.00s)
=== NAME  
PASS
ok  	github.com/runger/clai/internal/config	3.301s
