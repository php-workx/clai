=== RUN   TestNewFrequencyStore
=== PAUSE TestNewFrequencyStore
=== NAME  
=== RUN   TestFrequencyStore_Update
=== PAUSE TestFrequencyStore_Update
=== NAME  
=== RUN   TestFrequencyStore_UpdateBoth
=== PAUSE TestFrequencyStore_UpdateBoth
=== NAME  
=== RUN   TestFrequencyStore_UpdateAll
=== PAUSE TestFrequencyStore_UpdateAll
=== NAME  
=== RUN   TestFrequencyStore_GetTopCommands
=== PAUSE TestFrequencyStore_GetTopCommands
=== NAME  
=== RUN   TestFrequencyStore_GetScore_Nonexistent
=== PAUSE TestFrequencyStore_GetScore_Nonexistent
=== NAME  
=== RUN   TestDecayFormula
=== PAUSE TestDecayFormula
=== NAME  
=== RUN   TestPipelineStore_GetNextSegments_Empty
=== PAUSE TestPipelineStore_GetNextSegments_Empty
=== NAME  
=== RUN   TestPipelineStore_GetNextSegments
=== PAUSE TestPipelineStore_GetNextSegments
=== NAME  
=== RUN   TestPipelineStore_GetNextSegments_FilterByOperator
=== PAUSE TestPipelineStore_GetNextSegments_FilterByOperator
=== NAME  
=== RUN   TestPipelineStore_GetNextSegments_AllOperators
=== PAUSE TestPipelineStore_GetNextSegments_AllOperators
=== NAME  
=== RUN   TestPipelineStore_GetTopPipelinePatterns
=== PAUSE TestPipelineStore_GetTopPipelinePatterns
=== NAME  
=== RUN   TestPipelineStore_GetPipelinePatternsStartingWith
=== PAUSE TestPipelineStore_GetPipelinePatternsStartingWith
=== NAME  
=== RUN   TestPipelineStore_GetPipelineSegmentCount
=== PAUSE TestPipelineStore_GetPipelineSegmentCount
=== NAME  
=== RUN   TestSlotStore_DefaultOptions
=== PAUSE TestSlotStore_DefaultOptions
=== NAME  
=== RUN   TestSlotStore_NewWithDefaults
=== PAUSE TestSlotStore_NewWithDefaults
=== NAME  
=== RUN   TestSlotStore_NewClampsValues
=== PAUSE TestSlotStore_NewClampsValues
=== NAME  
=== RUN   TestSlotStore_Update_FirstOccurrence
=== PAUSE TestSlotStore_Update_FirstOccurrence
=== NAME  
=== RUN   TestSlotStore_Update_AccumulatesCount
=== PAUSE TestSlotStore_Update_AccumulatesCount
=== NAME  
=== RUN   TestSlotStore_Update_WithDecay
=== PAUSE TestSlotStore_Update_WithDecay
=== NAME  
=== RUN   TestSlotStore_UpdateBoth
=== PAUSE TestSlotStore_UpdateBoth
=== NAME  
=== RUN   TestSlotStore_UpdateBoth_NoRepoKey
=== PAUSE TestSlotStore_UpdateBoth_NoRepoKey
=== NAME  
=== RUN   TestSlotStore_GetTopValues_OrdersByCount
=== PAUSE TestSlotStore_GetTopValues_OrdersByCount
=== NAME  
=== RUN   TestSlotStore_GetTopValues_RespectsLimit
=== PAUSE TestSlotStore_GetTopValues_RespectsLimit
=== NAME  
=== RUN   TestSlotStore_GetTopValues_DecaysAtQueryTime
=== PAUSE TestSlotStore_GetTopValues_DecaysAtQueryTime
=== NAME  
=== RUN   TestSlotStore_GetBestValue_PrefersRepoScope
=== PAUSE TestSlotStore_GetBestValue_PrefersRepoScope
=== NAME  
=== RUN   TestSlotStore_GetBestValue_FallsBackToGlobal
=== PAUSE TestSlotStore_GetBestValue_FallsBackToGlobal
=== NAME  
=== RUN   TestSlotStore_GetBestValue_RequiresConfidence
=== PAUSE TestSlotStore_GetBestValue_RequiresConfidence
=== NAME  
=== RUN   TestSlotStore_GetBestValue_SingleValueIsConfident
=== PAUSE TestSlotStore_GetBestValue_SingleValueIsConfident
=== NAME  
=== RUN   TestSlotStore_GetBestValue_HighConfidence
=== PAUSE TestSlotStore_GetBestValue_HighConfidence
=== NAME  
=== RUN   TestSlotStore_GetBestValue_NoValues
=== PAUSE TestSlotStore_GetBestValue_NoValues
=== NAME  
=== RUN   TestSlotStore_IsConfidentValue
=== PAUSE TestSlotStore_IsConfidentValue
=== NAME  
=== RUN   TestSlotStore_MultipleSlotIndices
=== PAUSE TestSlotStore_MultipleSlotIndices
=== NAME  
=== RUN   TestSlotStore_PruneSlot
=== PAUSE TestSlotStore_PruneSlot
=== NAME  
=== RUN   TestSlotStore_PruneSlot_NothingToPrune
=== PAUSE TestSlotStore_PruneSlot_NothingToPrune
=== NAME  
=== RUN   TestSlotStore_Constants
=== PAUSE TestSlotStore_Constants
=== NAME  
=== RUN   TestSortSlotValues
=== PAUSE TestSortSlotValues
=== NAME  
=== RUN   TestNewTransitionStore
=== PAUSE TestNewTransitionStore
=== NAME  
=== RUN   TestTransitionStore_RecordTransition
=== PAUSE TestTransitionStore_RecordTransition
=== NAME  
=== RUN   TestTransitionStore_RecordTransitionBoth
=== PAUSE TestTransitionStore_RecordTransitionBoth
=== NAME  
=== RUN   TestTransitionStore_RecordTransitionAll
=== PAUSE TestTransitionStore_RecordTransitionAll
=== NAME  
=== RUN   TestTransitionStore_GetPreviousCommand
=== PAUSE TestTransitionStore_GetPreviousCommand
=== NAME  
=== RUN   TestTransitionStore_GetPreviousCommandWithFallback
=== PAUSE TestTransitionStore_GetPreviousCommandWithFallback
=== NAME  
=== RUN   TestTransitionStore_GetTopNextCommands
=== PAUSE TestTransitionStore_GetTopNextCommands
=== NAME  
=== RUN   TestTransitionStore_GetTransitionCount_Nonexistent
=== PAUSE TestTransitionStore_GetTransitionCount_Nonexistent
=== NAME  
=== CONT  TestFrequencyStore_Update
=== CONT  TestSlotStore_GetTopValues_OrdersByCount
=== CONT  TestSlotStore_UpdateBoth_NoRepoKey
=== CONT  TestSlotStore_GetBestValue_PrefersRepoScope
=== CONT  TestSlotStore_Update_WithDecay
=== CONT  TestSlotStore_UpdateBoth
=== CONT  TestDecayFormula
=== RUN   TestDecayFormula/no_decay_at_t=0
=== CONT  TestPipelineStore_GetNextSegments_AllOperators
=== CONT  TestPipelineStore_GetNextSegments_FilterByOperator
=== CONT  TestSlotStore_DefaultOptions
--- PASS: TestSlotStore_DefaultOptions (0.00s)
=== CONT  TestPipelineStore_GetTopPipelinePatterns
--- PASS: TestDecayFormula/no_decay_at_t=0 (0.00s)
=== NAME  TestDecayFormula
=== RUN   TestDecayFormula/half-life_decay
--- PASS: TestDecayFormula/half-life_decay (0.00s)
=== NAME  TestDecayFormula
=== RUN   TestDecayFormula/full_decay_after_many_tau
--- PASS: TestDecayFormula/full_decay_after_many_tau (0.00s)
=== NAME  TestDecayFormula
--- PASS: TestDecayFormula (0.00s)
=== CONT  TestPipelineStore_GetNextSegments_Empty
=== RUN   TestFrequencyStore_Update/first_occurrence_sets_score_to_1
--- PASS: TestFrequencyStore_Update/first_occurrence_sets_score_to_1 (0.00s)
=== NAME  TestFrequencyStore_Update
=== RUN   TestFrequencyStore_Update/immediate_repeat_increments_to_2
--- PASS: TestFrequencyStore_Update/immediate_repeat_increments_to_2 (0.00s)
=== NAME  TestFrequencyStore_Update
=== RUN   TestFrequencyStore_Update/score_decays_over_time
--- PASS: TestFrequencyStore_Update/score_decays_over_time (0.00s)
=== NAME  TestFrequencyStore_Update
=== CONT  TestPipelineStore_GetNextSegments
--- PASS: TestFrequencyStore_Update (0.03s)
--- PASS: TestSlotStore_UpdateBoth_NoRepoKey (0.04s)
=== CONT  TestSlotStore_NewClampsValues
--- PASS: TestSlotStore_Update_WithDecay (0.04s)
=== CONT  TestSlotStore_Update_FirstOccurrence
--- PASS: TestSlotStore_UpdateBoth (0.04s)
=== CONT  TestSlotStore_NewWithDefaults
--- PASS: TestSlotStore_GetTopValues_OrdersByCount (0.04s)
=== CONT  TestPipelineStore_GetPipelinePatternsStartingWith
=== RUN   TestSlotStore_NewClampsValues/tau_below_minimum
--- PASS: TestSlotStore_NewClampsValues/tau_below_minimum (0.00s)
=== NAME  TestSlotStore_NewClampsValues
=== RUN   TestSlotStore_NewClampsValues/topK_below_minimum
--- PASS: TestSlotStore_NewClampsValues/topK_below_minimum (0.00s)
=== NAME  TestSlotStore_NewClampsValues
=== RUN   TestSlotStore_NewClampsValues/topK_above_maximum
--- PASS: TestSlotStore_NewClampsValues/topK_above_maximum (0.00s)
--- PASS: TestSlotStore_NewWithDefaults (0.05s)
=== CONT  TestPipelineStore_GetPipelineSegmentCount
=== NAME  TestSlotStore_NewClampsValues
--- PASS: TestSlotStore_GetBestValue_PrefersRepoScope (0.09s)
=== CONT  TestFrequencyStore_UpdateBoth
--- PASS: TestSlotStore_NewClampsValues (0.06s)
=== CONT  TestFrequencyStore_GetScore_Nonexistent
--- PASS: TestSlotStore_Update_FirstOccurrence (0.07s)
=== CONT  TestFrequencyStore_UpdateAll
=== RUN   TestFrequencyStore_UpdateBoth/updates_both_global_and_repo_scopes
--- PASS: TestFrequencyStore_UpdateBoth/updates_both_global_and_repo_scopes (0.00s)
=== NAME  TestFrequencyStore_UpdateBoth
=== RUN   TestFrequencyStore_UpdateBoth/empty_repo_key_only_updates_global
--- PASS: TestFrequencyStore_UpdateBoth/empty_repo_key_only_updates_global (0.01s)
=== NAME  TestFrequencyStore_UpdateBoth
--- PASS: TestFrequencyStore_UpdateBoth (0.05s)
=== CONT  TestSlotStore_Update_AccumulatesCount
=== RUN   TestFrequencyStore_UpdateAll/updates_global,_repo,_and_dir_scopes
--- PASS: TestFrequencyStore_GetScore_Nonexistent (0.06s)
=== CONT  TestSortSlotValues
=== CONT  TestTransitionStore_GetTransitionCount_Nonexistent
--- PASS: TestSortSlotValues (0.00s)
--- PASS: TestFrequencyStore_UpdateAll/updates_global,_repo,_and_dir_scopes (0.01s)
=== NAME  TestFrequencyStore_UpdateAll
=== RUN   TestFrequencyStore_UpdateAll/empty_dir_scope_key_skips_dir_update
--- PASS: TestFrequencyStore_UpdateAll/empty_dir_scope_key_skips_dir_update (0.00s)
=== NAME  TestFrequencyStore_UpdateAll
=== RUN   TestFrequencyStore_UpdateAll/empty_repo_and_dir_keys_only_updates_global
--- PASS: TestFrequencyStore_UpdateAll/empty_repo_and_dir_keys_only_updates_global (0.00s)
=== NAME  TestFrequencyStore_UpdateAll
=== RUN   TestFrequencyStore_UpdateAll/accumulates_across_multiple_calls
--- PASS: TestFrequencyStore_UpdateAll/accumulates_across_multiple_calls (0.02s)
=== NAME  TestFrequencyStore_UpdateAll
--- PASS: TestSlotStore_Update_AccumulatesCount (0.04s)
=== CONT  TestTransitionStore_GetTopNextCommands
--- PASS: TestFrequencyStore_UpdateAll (0.08s)
=== CONT  TestTransitionStore_GetPreviousCommandWithFallback
--- PASS: TestTransitionStore_GetTransitionCount_Nonexistent (0.09s)
=== CONT  TestTransitionStore_GetPreviousCommand
=== RUN   TestTransitionStore_GetTopNextCommands/returns_top_commands_by_count
--- PASS: TestTransitionStore_GetTopNextCommands/returns_top_commands_by_count (0.00s)
=== NAME  TestTransitionStore_GetTopNextCommands
=== RUN   TestTransitionStore_GetTopNextCommands/respects_limit
--- PASS: TestTransitionStore_GetTopNextCommands/respects_limit (0.00s)
=== NAME  TestTransitionStore_GetTopNextCommands
=== RUN   TestTransitionStore_GetTopNextCommands/returns_empty_for_nonexistent_prev_command
--- PASS: TestTransitionStore_GetTopNextCommands/returns_empty_for_nonexistent_prev_command (0.00s)
=== NAME  TestTransitionStore_GetTopNextCommands
--- PASS: TestTransitionStore_GetTopNextCommands (0.07s)
=== CONT  TestTransitionStore_RecordTransitionBoth
--- PASS: TestPipelineStore_GetNextSegments_AllOperators (0.26s)
=== CONT  TestSlotStore_Constants
--- PASS: TestSlotStore_Constants (0.00s)
=== CONT  TestTransitionStore_RecordTransition
=== RUN   TestTransitionStore_GetPreviousCommandWithFallback/prefers_session_match
--- PASS: TestTransitionStore_GetPreviousCommandWithFallback/prefers_session_match (0.00s)
=== NAME  TestTransitionStore_GetPreviousCommandWithFallback
=== RUN   TestTransitionStore_GetPreviousCommandWithFallback/falls_back_to_repo_when_no_session_match
--- PASS: TestTransitionStore_GetPreviousCommandWithFallback/falls_back_to_repo_when_no_session_match (0.00s)
=== NAME  TestTransitionStore_GetPreviousCommandWithFallback
=== RUN   TestTransitionStore_GetPreviousCommandWithFallback/respects_fallback_window
--- PASS: TestTransitionStore_GetPreviousCommandWithFallback/respects_fallback_window (0.00s)
=== NAME  TestTransitionStore_GetPreviousCommandWithFallback
=== RUN   TestTransitionStore_GetPreviousCommandWithFallback/returns_empty_when_no_repo_key
--- PASS: TestTransitionStore_GetPreviousCommandWithFallback/returns_empty_when_no_repo_key (0.00s)
=== NAME  TestTransitionStore_GetPreviousCommandWithFallback
--- PASS: TestTransitionStore_GetPreviousCommandWithFallback (0.08s)
=== CONT  TestFrequencyStore_GetTopCommands
=== RUN   TestTransitionStore_RecordTransitionBoth/updates_both_global_and_repo_scopes
=== RUN   TestTransitionStore_GetPreviousCommand/returns_previous_command_in_same_session
--- PASS: TestTransitionStore_GetPreviousCommand/returns_previous_command_in_same_session (0.00s)
=== NAME  TestTransitionStore_GetPreviousCommand
=== RUN   TestTransitionStore_GetPreviousCommand/returns_most_recent_command_before_timestamp
--- PASS: TestTransitionStore_GetPreviousCommand/returns_most_recent_command_before_timestamp (0.00s)
=== NAME  TestTransitionStore_GetPreviousCommand
=== RUN   TestTransitionStore_GetPreviousCommand/returns_empty_for_first_command
--- PASS: TestTransitionStore_GetPreviousCommand/returns_empty_for_first_command (0.00s)
=== NAME  TestTransitionStore_GetPreviousCommand
=== RUN   TestTransitionStore_GetPreviousCommand/returns_empty_for_nonexistent_session
--- PASS: TestTransitionStore_GetPreviousCommand/returns_empty_for_nonexistent_session (0.00s)
=== NAME  TestTransitionStore_GetPreviousCommand
--- PASS: TestTransitionStore_RecordTransitionBoth/updates_both_global_and_repo_scopes (0.00s)
=== NAME  TestTransitionStore_RecordTransitionBoth
=== RUN   TestTransitionStore_RecordTransitionBoth/empty_repo_key_only_updates_global
--- PASS: TestTransitionStore_GetPreviousCommand (0.06s)
=== CONT  TestTransitionStore_RecordTransitionAll
--- PASS: TestTransitionStore_RecordTransitionBoth/empty_repo_key_only_updates_global (0.00s)
=== NAME  TestTransitionStore_RecordTransitionBoth
=== RUN   TestTransitionStore_RecordTransition/first_transition_sets_count_to_1
--- PASS: TestTransitionStore_RecordTransitionBoth (0.05s)
=== CONT  TestNewFrequencyStore
--- PASS: TestTransitionStore_RecordTransition/first_transition_sets_count_to_1 (0.00s)
=== NAME  TestTransitionStore_RecordTransition
=== RUN   TestTransitionStore_RecordTransition/repeated_transition_increments_count
--- PASS: TestTransitionStore_RecordTransition/repeated_transition_increments_count (0.00s)
=== NAME  TestTransitionStore_RecordTransition
=== RUN   TestTransitionStore_RecordTransition/different_transition_is_tracked_separately
--- PASS: TestTransitionStore_RecordTransition/different_transition_is_tracked_separately (0.00s)
=== NAME  TestTransitionStore_RecordTransition
=== RUN   TestFrequencyStore_GetTopCommands/returns_top_commands_by_score
--- PASS: TestPipelineStore_GetNextSegments_FilterByOperator (0.31s)
=== CONT  TestNewTransitionStore
--- PASS: TestFrequencyStore_GetTopCommands/returns_top_commands_by_score (0.00s)
=== NAME  TestFrequencyStore_GetTopCommands
=== RUN   TestFrequencyStore_GetTopCommands/respects_limit
--- PASS: TestTransitionStore_RecordTransition (0.05s)
=== CONT  TestSlotStore_PruneSlot_NothingToPrune
--- PASS: TestFrequencyStore_GetTopCommands/respects_limit (0.00s)
=== NAME  TestFrequencyStore_GetTopCommands
=== RUN   TestFrequencyStore_GetTopCommands/returns_empty_for_nonexistent_scope
--- PASS: TestFrequencyStore_GetTopCommands/returns_empty_for_nonexistent_scope (0.00s)
=== NAME  TestFrequencyStore_GetTopCommands
--- PASS: TestFrequencyStore_GetTopCommands (0.05s)
=== CONT  TestSlotStore_GetBestValue_SingleValueIsConfident
--- PASS: TestPipelineStore_GetNextSegments_Empty (0.32s)
=== CONT  TestSlotStore_GetBestValue_RequiresConfidence
--- PASS: TestPipelineStore_GetPipelinePatternsStartingWith (0.28s)
=== CONT  TestSlotStore_PruneSlot
=== RUN   TestNewFrequencyStore/default_options
--- PASS: TestPipelineStore_GetTopPipelinePatterns (0.32s)
=== CONT  TestSlotStore_GetBestValue_FallsBackToGlobal
--- PASS: TestNewFrequencyStore/default_options (0.00s)
=== NAME  TestNewFrequencyStore
=== RUN   TestNewFrequencyStore/custom_tau
--- PASS: TestNewFrequencyStore/custom_tau (0.00s)
=== NAME  TestNewFrequencyStore
=== RUN   TestNewFrequencyStore/tau_below_minimum_is_clamped
--- PASS: TestNewFrequencyStore/tau_below_minimum_is_clamped (0.00s)
=== NAME  TestNewFrequencyStore
=== RUN   TestNewFrequencyStore/zero_tau_uses_default
--- PASS: TestNewFrequencyStore/zero_tau_uses_default (0.00s)
=== NAME  TestNewFrequencyStore
--- PASS: TestNewFrequencyStore (0.03s)
=== CONT  TestSlotStore_IsConfidentValue
=== RUN   TestTransitionStore_RecordTransitionAll/updates_global,_repo,_and_dir_scopes
--- PASS: TestTransitionStore_RecordTransitionAll/updates_global,_repo,_and_dir_scopes (0.01s)
=== NAME  TestTransitionStore_RecordTransitionAll
=== RUN   TestTransitionStore_RecordTransitionAll/empty_dir_scope_key_skips_dir_update
--- PASS: TestPipelineStore_GetNextSegments (0.31s)
=== CONT  TestSlotStore_MultipleSlotIndices
--- PASS: TestTransitionStore_RecordTransitionAll/empty_dir_scope_key_skips_dir_update (0.00s)
=== NAME  TestTransitionStore_RecordTransitionAll
=== RUN   TestTransitionStore_RecordTransitionAll/empty_repo_and_dir_keys_only_updates_global
--- PASS: TestTransitionStore_RecordTransitionAll/empty_repo_and_dir_keys_only_updates_global (0.00s)
=== NAME  TestTransitionStore_RecordTransitionAll
=== RUN   TestTransitionStore_RecordTransitionAll/accumulates_across_multiple_calls
--- PASS: TestSlotStore_PruneSlot_NothingToPrune (0.04s)
=== CONT  TestSlotStore_GetBestValue_HighConfidence
--- PASS: TestNewTransitionStore (0.04s)
=== CONT  TestSlotStore_GetBestValue_NoValues
--- PASS: TestTransitionStore_RecordTransitionAll/accumulates_across_multiple_calls (0.01s)
=== NAME  TestTransitionStore_RecordTransitionAll
--- PASS: TestSlotStore_GetBestValue_RequiresConfidence (0.04s)
=== CONT  TestSlotStore_GetTopValues_DecaysAtQueryTime
--- PASS: TestSlotStore_GetBestValue_SingleValueIsConfident (0.04s)
=== CONT  TestSlotStore_GetTopValues_RespectsLimit
--- PASS: TestTransitionStore_RecordTransitionAll (0.07s)
--- PASS: TestSlotStore_GetBestValue_FallsBackToGlobal (0.04s)
=== RUN   TestSlotStore_IsConfidentValue/empty
--- PASS: TestSlotStore_IsConfidentValue/empty (0.00s)
=== NAME  TestSlotStore_IsConfidentValue
=== RUN   TestSlotStore_IsConfidentValue/single_with_count
--- PASS: TestSlotStore_IsConfidentValue/single_with_count (0.00s)
=== NAME  TestSlotStore_IsConfidentValue
=== RUN   TestSlotStore_IsConfidentValue/single_with_zero_count
--- PASS: TestSlotStore_IsConfidentValue/single_with_zero_count (0.00s)
=== NAME  TestSlotStore_IsConfidentValue
=== RUN   TestSlotStore_IsConfidentValue/two_values_-_confident
--- PASS: TestSlotStore_IsConfidentValue/two_values_-_confident (0.00s)
=== NAME  TestSlotStore_IsConfidentValue
=== RUN   TestSlotStore_IsConfidentValue/two_values_-_not_confident
--- PASS: TestSlotStore_IsConfidentValue/two_values_-_not_confident (0.00s)
=== NAME  TestSlotStore_IsConfidentValue
=== RUN   TestSlotStore_IsConfidentValue/two_values_-_exact_2x
--- PASS: TestSlotStore_IsConfidentValue/two_values_-_exact_2x (0.00s)
=== NAME  TestSlotStore_IsConfidentValue
--- PASS: TestSlotStore_IsConfidentValue (0.05s)
--- PASS: TestSlotStore_MultipleSlotIndices (0.04s)
--- PASS: TestSlotStore_GetBestValue_NoValues (0.03s)
--- PASS: TestSlotStore_GetTopValues_DecaysAtQueryTime (0.03s)
--- PASS: TestSlotStore_GetTopValues_RespectsLimit (0.03s)
--- PASS: TestSlotStore_PruneSlot (0.06s)
--- PASS: TestPipelineStore_GetPipelineSegmentCount (0.31s)
--- PASS: TestSlotStore_GetBestValue_HighConfidence (0.05s)
PASS
ok  	github.com/runger/clai/internal/suggestions/score	2.561s
