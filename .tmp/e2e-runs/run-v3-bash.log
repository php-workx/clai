test server already running (pid=88797)
url: http://127.0.0.1:8080
[bash] 1/97 History picker opens with Alt+H
  -> PASS
[bash] 2/97 History picker fuzzy search filters results
  -> FAIL: expected screen to contain: apple | expected screen to contain: apricot
[bash] 3/97 History picker navigation with arrow keys
  -> PASS
[bash] 4/97 History picker Enter inserts command
  -> PASS
[bash] 5/97 History picker Escape cancels
  -> PASS
[bash] 6/97 History scope switching with Tab
  -> PASS
[bash] 7/97 Session history is isolated from global
  -> PASS
[bash] 8/97 Global history contains cross-session commands
  -> PASS
[bash] 9/97 Long command shows truncation indicator
  -> PASS
[bash] 10/97 Enter inserts full untruncated command
  -> PASS
[bash] 11/97 Ctrl+C copies full untruncated command
  -> PASS
[bash] 12/97 clai loads successfully in bash
  -> PASS
[bash] 13/97 Session ID is set
  -> PASS
[bash] 14/97 History command shows session history
  -> PASS
[bash] 15/97 clai cmd converts natural language to command
  -> SKIP: clai cmd not yet fully implemented
[bash] 16/97 clai cmd caches suggestion for completion
  -> SKIP: clai cmd not yet fully implemented
[bash] 17/97 clai ask answers terminal questions
  -> SKIP: clai ask not yet fully implemented
[bash] 18/97 clai ask with context flag
  -> SKIP: clai ask not yet fully implemented
[bash] 19/97 clai status shows session info
  -> PASS
[bash] 20/97 clai history with session flag
  -> PASS
[bash] 21/97 clai history with global flag
  -> PASS
[bash] 22/97 clai history filters by CWD
  -> PASS
[bash] 23/97 clai history filters successful commands
  -> PASS
[bash] 24/97 clai history filters failed commands
  -> PASS
[bash] 25/97 clai off disables integration
  -> PASS
[bash] 26/97 clai on re-enables integration
  -> PASS
[bash] 27/97 PTY wrapper captures stdout
  -> PASS
[bash] 28/97 PTY wrapper handles colors
  -> PASS
[bash] 29/97 PTY wrapper Ctrl+C handling
  -> PASS
[bash] 30/97 Voice mode converts natural language
  -> PASS
[bash] 31/97 Empty command line doesn't crash
  -> PASS
[bash] 32/97 Very long command doesn't overflow
  -> PASS
[bash] 33/97 Special characters handled correctly
  -> PASS
[bash] 34/97 CWD scope works with paths containing spaces
  -> FAIL: expected screen to contain: command in spaced dir
[bash] 35/97 History args handle special path characters
  -> PASS
[bash] 36/97 Incognito mode can be enabled
  -> PASS
[bash] 37/97 Commands in incognito mode not persisted
  -> PASS
[bash] 38/97 Incognito mode can be disabled
  -> PASS
[bash] 39/97 CLAI_NO_RECORD prevents all ingestion
  -> PASS
[bash] 40/97 Command ingestion captures exit code success
  -> PASS
[bash] 41/97 Command ingestion captures exit code failure
  -> PASS
[bash] 42/97 Command ingestion captures CWD
  -> PASS
[bash] 43/97 Command with special characters ingested
  -> PASS
[bash] 44/97 Command with unicode characters ingested
  -> PASS
[bash] 45/97 clai daemon status shows state
  -> PASS
[bash] 46/97 clai daemon start works
  -> FAIL: expected screen to contain: running
[bash] 47/97 clai daemon stop graceful shutdown
  -> PASS
[bash] 48/97 clai daemon restart sequence
  -> PASS
[bash] 49/97 clai suggest text format
  -> PASS
[bash] 50/97 clai suggest JSON format
  -> FAIL: expected screen to contain: {
[bash] 51/97 clai suggest fzf format
  -> PASS
[bash] 52/97 clai suggest with limit
  -> PASS
[bash] 53/97 clai suggest with prefix filters results
  -> FAIL: expected screen not to contain: npm | expected screen not to contain: make
[bash] 54/97 Suggestion shows transition reason
  -> FAIL: expected screen to contain: transition
[bash] 55/97 Suggestion shows freq_repo reason
  -> FAIL: expected screen to match: (freq_repo|freq_global)
[bash] 56/97 Suggestion includes confidence score
  -> FAIL: expected screen to contain: confidence
[bash] 57/97 Suggestion context includes last_cmd_norm
  -> PASS
[bash] 58/97 Ghost text suggestion appears
  -> FAIL: expected screen to contain: git status
[bash] 59/97 Right arrow accepts full suggestion
  -> PASS
[bash] 60/97 Escape clears suggestion
  -> PASS
[bash] 61/97 Typing clears ghost text
  -> PASS
[bash] 62/97 Alt+Right accepts next token
  -> FAIL: expected screen to contain: kubectl get
[bash] 63/97 Typo correction suggests on exit 127
  -> SKIP: Typo correction backend not yet implemented
[bash] 64/97 Typo correction respects similarity threshold
  -> SKIP: Typo correction backend not yet implemented
[bash] 65/97 Typo correction prioritizes high-frequency commands
  -> SKIP: Typo correction backend not yet implemented
[bash] 66/97 Slot filling learns argument values
  -> SKIP: Slot filling backend not yet implemented
[bash] 67/97 Slot filling respects frequency
  -> SKIP: Slot filling backend not yet implemented
[bash] 68/97 Slot scope repo overrides global
  -> SKIP: Slot filling backend not yet implemented
[bash] 69/97 Suggestions served from cache
  -> SKIP: Cache introspection not yet exposed in CLI
[bash] 70/97 Cache TTL expires stale entries
  -> SKIP: Cache introspection not yet exposed in CLI
[bash] 71/97 Cache invalidated on new command
  -> SKIP: Cache introspection not yet exposed in CLI
[bash] 72/97 Cache shows in debug endpoint
  -> SKIP: Cache introspection not yet exposed in CLI
[bash] 73/97 Alt+H opens suggestion picker (bash)
  -> PASS
[bash] 74/97 clai search basic query
  -> PASS
[bash] 75/97 clai search with repo filter
  -> PASS
[bash] 76/97 clai search with limit
  -> PASS
[bash] 77/97 clai search with JSON output
  -> PASS
[bash] 78/97 clai search empty results
  -> PASS
[bash] 79/97 clai search with special characters
  -> PASS
[bash] 80/97 Discovery finds package.json scripts
  -> PASS
[bash] 81/97 Discovery finds Makefile targets
  -> PASS
[bash] 82/97 Discovery shows project_task reason
  -> FAIL: expected screen to contain: project_task
[bash] 83/97 Discovery finds Cargo.toml commands
  -> SKIP: Cargo discovery not yet implemented
[bash] 84/97 Discovery finds pyproject.toml scripts
  -> SKIP: pyproject.toml discovery not yet implemented
[bash] 85/97 Debug scores endpoint returns data
  -> PASS
[bash] 86/97 Debug scores with limit parameter
  -> PASS
[bash] 87/97 Debug transitions endpoint returns data
