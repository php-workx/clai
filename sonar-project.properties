# SonarCloud configuration for clai
# https://docs.sonarcloud.io/advanced-setup/analysis-parameters/

sonar.projectKey=php-workx_clai
sonar.organization=php-workx

# Source configuration
sonar.sources=.
sonar.exclusions=**/*_test.go,**/testdata/**,**/vendor/**,.beads/**

# Test configuration
sonar.tests=.
sonar.test.inclusions=**/*_test.go,**/tests/**

# Go coverage (if using)
sonar.go.coverage.reportPaths=coverage.out

# =============================================================================
# Rule Exclusions
# =============================================================================

# Exclude test files from function naming rules (go:S100)
# Go test conventions commonly use underscores: Test_FunctionName, TestFoo_SubCase
sonar.issue.ignore.multicriteria=e1,e2,e3,e4,e5,e6

# Rule: go:S100 - Function and method names should comply with naming convention
# Reason: Go test naming conventions use underscores for subtests
sonar.issue.ignore.multicriteria.e1.ruleKey=go:S100
sonar.issue.ignore.multicriteria.e1.resourceKey=**/*_test.go

# Rule: go:S100 - Also ignore in test directories
sonar.issue.ignore.multicriteria.e2.ruleKey=go:S100
sonar.issue.ignore.multicriteria.e2.resourceKey=**/tests/**

# Ignore hardcoded credentials rules in test files
# Tests legitimately contain fake passwords, tokens, API keys for testing
sonar.issue.ignore.multicriteria.e3.ruleKey=go:S2068
sonar.issue.ignore.multicriteria.e3.resourceKey=**/*_test.go

sonar.issue.ignore.multicriteria.e4.ruleKey=go:S2068
sonar.issue.ignore.multicriteria.e4.resourceKey=**/tests/**

# Rule: go:S1192 - String literals should not be duplicated
# Reason: Test files use repeated literals for readability (inline test data).
# Extracting "npm install" or "test prompt" into constants hurts test comprehension.
sonar.issue.ignore.multicriteria.e5.ruleKey=go:S1192
sonar.issue.ignore.multicriteria.e5.resourceKey=**/*_test.go

sonar.issue.ignore.multicriteria.e6.ruleKey=go:S1192
sonar.issue.ignore.multicriteria.e6.resourceKey=**/tests/**

# =============================================================================
# Generated Code Exclusions
# =============================================================================

# Exclude generated protobuf files from all analysis
sonar.exclusions=**/gen/**/*.pb.go,**/*.pb.go

# =============================================================================
# Coverage Exclusions
# =============================================================================

# Don't expect coverage for generated files, CLI entry points, or test utilities
sonar.coverage.exclusions=**/gen/**,**/cmd/**/main.go,**/testutil/**,**/testdata/**
